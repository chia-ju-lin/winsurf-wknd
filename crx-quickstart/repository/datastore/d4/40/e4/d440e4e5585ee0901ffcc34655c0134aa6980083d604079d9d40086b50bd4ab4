/*!************************************************************************
*
* ADOBE CONFIDENTIAL
* ___________________
*
*  Copyright 2011 Adobe Systems Incorporated
*  All Rights Reserved.
*
* NOTICE:  All information contained herein is, and remains
* the property of Adobe Systems Incorporated and its suppliers,
* if any.  The intellectual and technical concepts contained
* herein are proprietary to Adobe Systems Incorporated and its
* suppliers and are protected by trade secret or copyright law.
* Dissemination of this information or reproduction of this material
* is strictly forbidden unless prior written permission is obtained
* from Adobe Systems Incorporated.
**************************************************************************/
(function(f){f.pkg("s7sdk.share");f.Util.require("s7sdk.common.Button");f.Util.require("s7sdk.event.Event");f.Util.require("s7sdk.common.IS");f.Util.require("s7sdk.common.ScrollBar");function c(i,k){const h=new Event("mouseover");i.dispatchEvent(h);var g=document.getElementsByClassName("s7tooltip");g[0].setAttribute("style","position:absolute; white-space:nowrap; pointer-events:none;"+k);var j=setInterval(function(){d(i);clearInterval(j)},2000)}function d(g){const h=new Event("mouseout");g.dispatchEvent(h)}if(!f.share.getObjPos){f.share.getObjPos=function(j){var g=0;var k=0;var i=0;var h=0;while(j!=null){i=f.Util.getStyle(j,"border-left-width");h=f.Util.getStyle(j,"border-top-width");if(f.Util.isNumber(i)&&(i!="")){g+=parseInt(i)}if(f.Util.isNumber(h)&&(h!="")){k+=parseInt(h)}g+=j.offsetLeft;k+=j.offsetTop;g-=j.scrollLeft;k-=j.scrollTop;j=j.offsetParent}return{x:g,y:k}};f.share.buttonsDefaultCSS=function(k,j,m,o,n){var h=f.Util.css.createCssRuleText;var i=f.Util.css.createCssImgUrlText;var o=(typeof o==="string")?o:"";var l="";if(m){l+=m[0]?h(j+"[state='up']",{"background-image":i(m[0])}):"";l+=m[1]?h(j+"[state='over']",{"background-image":i(m[1])}):"";l+=m[2]?h(j+"[state='down']",{"background-image":i(m[2])}):"";l+=m[3]?h(j+"[state='disabled']",{"background-image":i(m[3])}):""}l+=o;var g=h(j,{"width":"28px","height":"28px","background-size":"contain","background-repeat":"no-repeat","background-position":"center","-webkit-touch-callout":"none","-webkit-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none","-webkit-tap-highlight-color":"rgba(0,0,0,0)"})+l;if(n){return g}else{f.Util.css.addDefaultCSS(g,k)}};f.share.dialogsDefaultCSS=function(o,n,l,t){var h=f.Util.css.createCssRuleText;var j=f.Util.css.createCssImgUrlText;var s=f.browser&&f.browser.name=="ie"&&f.browser.version.major>=10;var t=(typeof t==="string")?t:"";var p="";if(l&&l.length!=0){for(var m=0;m<l.length;m++){var k=l[m];var q=k.skins;if(!q){return}p+=q[0]?h(n+" ."+k.cssNm+"[state='up']",{"background-image":j(q[0])}):"";p+=q[1]?h(n+" ."+k.cssNm+"[state='over']",{"background-image":j(q[1])}):"";p+=q[2]?h(n+" ."+k.cssNm+"[state='down']",{"background-image":j(q[2])}):"";p+=q[3]?h(n+" ."+k.cssNm+"[state='disabled']",{"background-image":j(q[3])}):""}}p+=t;var r=h(n+" .s7closebutton",{"position":"absolute","top":"2px","right":"2px","padding":"8px","width":"20px","height":"20px"})+h(n+" .s7closebutton[state='up']",{"background-image":j("close_up.png")})+h(n+" .s7closebutton[state='over']",{"background-image":j("close_over.png")})+h(n+" .s7closebutton[state='down']",{"background-image":j("close_down.png")})+h(n+" .s7closebutton[state='disabled']",{"background-image":j("close_disabled.png")});var g=h(n,{"position":"absolute","font-family":"Helvetica","z-index":"6000","user-select":"none","-ms-user-select":"none","-moz-user-select":"-moz-none","-webkit-user-select":"none","-webkit-tap-highlight-color":"rgba(0,0,0,0)","touch-action":s?"none":""})+h(n+" input::-ms-clear",{"display":"none"})+h(n+" .s7backoverlay",{"position":"absolute !important","width":"100% !important","height":"100% !important","opacity":"0.7","background-color":"#222222"})+h(n+" .s7dialog *",{"box-sizing":"content-box","-moz-box-sizing":"content-box"})+h(n+" .s7dialog",{"color":"#000000","border-radius":"8px","position":"absolute","background-color":"#dddddd"})+h(n+" .s7dialogheader",{"padding":"10px","position":"relative"})+h(n+" .s7dialoglabel",{"color":"#666666","font-weight":"bold","font-size":"9pt"})+h(n+" .s7dialogheadericon",{"position":"relative","vertical-align":"middle","display":"inline-block"})+h(n+" .s7dialogheadertext",{"vertical-align":"middle","padding-left":"16px","font-size":"16pt","position":"relative","font-weight":"bold"})+h(n+" .s7dialogviewarea",{"background-color":"#ffffff","margin":"10px","overflow":"hidden","position":"relative"})+h(n+" .s7dialogbody",{"padding":"10px","position":"relative","display":"inline-block"})+h(n+" .s7dialogfooter",{"border-top":"1px solid #909090","width":"100%","position":"relative"})+h(n+" .s7dialogbuttoncontainer",{"padding-top":"10px","padding-bottom":"6px","float":"right","position":"relative"})+h(n+" .s7dialogfooter .s7button",{"cursor":"default","margin-right":"10px","position":"relative","display":"inline-block","color":"#ffffff","font-size":"9pt","font-weight":"bold","text-align":"center","vertical-align":"middle","box-shadow":"1px 1px 1px #999999","line-height":"34px"})+h(n+" .s7dialogline",{"position":"relative","display":"inline-block"})+h(n+" .s7dialogheader .s7dialogline",{"padding":"10px 10px 2px"})+h(n+" .s7dialogscrollpanel",{"position":"relative","vertical-align":"top","width":"44px","height":"100%","display":"inline-block"})+h(n+" .s7dialoglinefeed",{"display":"block"});g+=r;g+=p;f.Util.css.addDefaultCSS(g,o)};f.share.getDialogSymbols=function(g){var i={};for(var h in g.symbols){if(h!="TOOLTIP"){i[h]=g.getLocalizedText(h)}}return i};f.share.comboBoxDDDefaultCSS=function(g){var j=f.Util.css.createCssRuleText;var i=f.Util.css.createCssImgUrlText;var h=j(g+" .s7comboboxdropdown",{"border-top":"1px solid #cccccc","width":"100%","display":"block"})+j(g+" .s7dropdownitem",{"display":"block","width":"100%","position":"relative"})+j(g+" .s7checkmark",{"width":"25px","height":"25px","vertical-align":"middle","display":"inline-block","background-image":i("cboxchecked.png")})+j(g+" .s7dropdownitemanchor",{"display":"block","width":"100%","background-color":"#ffffff","position":"relative"})+j(g+" .s7dropdownitemanchor[state='selected']",{"background-color":"#eeeeee"})+j(g+" .s7dropdownitemanchor[state='unselected']",{"background-color":"#ffffff"})+j(g+" .s7dropdownitemanchor:hover",{"background-color":"#eeeeee"});return h};f.share.comboBoxDefaultCSS=function(g){var k=f.Util.css.createCssRuleText;var j=f.Util.css.createCssImgUrlText;var i=f.share.buttonsDefaultCSS("",g+" .s7combobox .s7comboboxbutton",["cboxbtndn_up.png","cboxbtndn_over.png","cboxbtndn_over.png","cboxbtndn_up.png"],null,true);var h=k(g+" .s7combobox",{"-webkit-touch-callout":"none","-webkit-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none","border":"1px solid #cccccc","display":"block","padding-left":"10px","position":"relative","width":"300px","-webkit-tap-highlight-color":"rgba(0,0,0,0)"})+k(g+" .s7combobox[expanded='false']",{"width":"110px"})+k(g+" .s7combobox[expanded='true']",{"width":"300px"})+k(g+" .s7combobox .s7comboboxtext",{"position":"relative","display":"inline-block","height":"40px"})+k(g+" .s7combobox .s7comboboxbutton",{"position":"absolute","display":"block","top":"0px","right":"0px","width":"40px","height":"40px"})+k(g+" .s7combobox .s7comboboxdropdown",{"border-top":"1px solid #cccccc","width":"100%","display":"block"})+k(g+" .s7combobox .s7dropdownitem",{"display":"block","width":"100%","position":"relative"})+k(g+" .s7combobox .s7checkmark",{"width":"25px","height":"25px","vertical-align":"middle","display":"inline-block","background-image":j("cboxchecked.png")})+k(g+" .s7combobox .s7dropdownitemanchor",{"display":"block","width":"100%","background-color":"#ffffff","position":"relative"})+k(g+" .s7combobox .s7dropdownitemanchor[state='selected']",{"background-color":"#eeeeee"})+k(g+" .s7combobox .s7dropdownitemanchor[state='unselected']",{"background-color":"#ffffff"})+k(g+" .s7combobox .s7dropdownitemanchor:hover",{"background-color":"#eeeeee"});h=i+h;return h}}if(!f.share.DlgActionButton){f.share.DlgActionButton=function DlgActionButton(i,m,l,k,h,g,j){f.Logger.log(f.Logger.CONFIG,"s7sdk.share.DlgActionButton constructor - containerId: %0, settings: %1 , compId: %2",i,m,l);if(k){this.symbols=k}arguments.callee.superclass.superclass.call(this,l,i,g?g:"span",null,m);this.w=0;this.h=0;this.hint="";this.css=h;this.currentState=0;this.activated=true;this.init();if(j&&j.length>0){this.setText(j)}this.makeToolTip();this.changeState(this.currentState);this.obj.setAttribute("tabindex",0)};f.Class.inherits("s7sdk.share.DlgActionButton","s7sdk.common.Button");f.share.DlgActionButton.prototype.setText=function(g){this.obj.textContent=g;this.obj.innerText=g};f.share.DlgActionButton.prototype.symbols={TOOLTIP:""}}if(!f.share.EmailShareControl){f.share.EmailShareControl=function(g){arguments.callee.superclass.apply(this,[g,f.share.EmailShareControl.NS,g.constructor,f.share.EmailShare.RESTRICTED_STYLES]);var h=this;this.component.emaildialog.addEventListener(f.event.ControlComponentEvent.NOTF_CONTROLCOMPONENT_CSSUPDATED,function(j){var i=j.s7event.data;h.dispatchEvent(new f.event.ControlComponentEvent(f.event.ControlComponentEvent.NOTF_CONTROLCOMPONENT_CSSUPDATED,{id:h.component.emaildialog.getObj().id,classname:i.classname,property:i.property,value:i.value},false))},false)};f.share.EmailShareControl.prototype.setCSS=function(k,j,i){if(this.component){function h(l){return l.replace(/\./g,"")}var g=h(k);if(g==this.component.cl||g.indexOf(this.component.cl)==0){this.superclass.prototype.setCSS.apply(this,[k,j,i])}else{g=g.split(" ");if(g[0]==this.component.emaildialog.component.cl){this.component.emaildialog.setCSS(k,j,i)}}}};f.share.EmailShareControl.prototype.rebuild=function(h){if(this.component){var i=this.component.emaildialog;var g=this.component.getParameters();this.superproto.rebuild.apply(this,[h]);this.component.emaildialog=i;this.component.setParameters(g)}};f.share.EmailShareControl.NS="s7sdk.share.EmailShareControl"}f.Class.inherits(f.share.EmailShareControl.NS,"s7sdk.ControlComponent");if(!f.share.EmailShare){f.share.EmailShare=function EmailShare(n,h,p){f.Logger.log(f.Logger.CONFIG,"s7sdk.share.EmailShare constructor - containerId: %0, settings: %1 , compId: %2",n,h,p);var g=document.getElementById(n);if(g&&(g.s7base instanceof f.share.SocialShare)){n=g.s7base.getPanelId()}p=(typeof p=="string"&&p.length)?p:"EmailShare_"+f.Util.createUniqueId();var j=!!arguments[3];arguments.callee.superclass.apply(this,[p,n,null,0,0,"s7emailshare",h,parent,!j]);this.cl="s7emailshare";this.obj.setAttribute("tabindex",-1);this.obj.setAttribute("role","menuitem");var o=this.obj;o.addEventListener("focusout",function(){d(o)},false);o.addEventListener("focus",function(){c(o,"left:1178px; top:65px;")},false);var k=this;var l=false;this.ontouchHandler=function(q){l=true};f.Event.addDOMListener(this,"touchstart",this.ontouchHandler,{passive:false});this.onclickHandler=function(q){if(!(f.browser.supportsTouch())||(q instanceof MouseEvent)||l||k.inKey){if(g&&(g.s7base instanceof f.share.SocialShare)){g.s7base.onSocialClick()}k.btnClick()}l=false};f.Event.addDOMListener(this,"click",this.onclickHandler,false);this.serverUrl=f.Util.normalizeUrl(this.serverUrl);var i=/(^http[s]?:\/\/[^\/]+)?([^\\?#]*)/.exec(this.serverUrl);i=i==null?"":i[1];var m=/(^http[s]?:\/\/[^\/]+)?([^\\?#]*)/.exec(this.emailurl);m=m==null?"":m[1];if(i!=""&&m!=""&&m!=i){this.emailurl=this.serverUrl+"../../"+this.modifiers.emailurl.defaults[0]}else{if(i!=""&&m==""){this.emailurl=this.serverUrl+"../../"+this.modifiers.emailurl.defaults[0]}else{if(i==""&&m!=""){this.emailurl=this.modifiers.emailurl.defaults[0]}}}if(!j){this.emaildialog=new f.share.EmailDialog(this.id,this.settings,this.id+"_dialog",f.share.getDialogSymbols(this),this);return new f.share.EmailShareControl(this)}else{return this}};f.Class.inherits("s7sdk.share.EmailShare","s7sdk.common.Button");f.share.EmailShare.prototype.modifiers={emailurl:{params:["emailurl"],defaults:["/s7/emailFriend"]},serverUrl:{params:["isRootPath"],defaults:["/is/image/"]}};f.share.EmailShare.prototype.symbols={TOOLTIP:"Email",HEADER:"Email Link",TOOLTIP_HEADER_CLOSE:"Close",INVALID_ADDRESSS:"Wrong email address",TO_EMAIL_ERROR:"To email address is required or it may be invalid",FROM_EMAIL_ERROR:"From email address is required or it may be invalid",TO:"To",TOOLTIP_ADD:"Add",ADD:"Add Another Email Address",PRIMARY_EMAIL_ADDRESS:"Primary Email Address",ADDITIONAL_EMAIL_ADDRESS:"Additional Email Address",ADDITIONAL_EMAIL_ADDRESSES:"Additional Email Addresses",FROM:"From",MESSAGE:"Message",TOOLTIP_REMOVE:"Remove",REMOVE:"Remove the email address",CANCEL:"Cancel",TOOLTIP_CANCEL:"Cancel",CLOSE:"Close",TOOLTIP_CLOSE:"Close",TOOLTIP_SCROLL_UP:"Scroll up",TOOLTIP_SCROLL_DOWN:"Scroll down",ACTION:"Send Email",TOOLTIP_ACTION:"Send Email",SEND_SUCCESS:"Email sent successfully",SEND_FAILURE:"Send email failed"};f.share.EmailShare.RESTRICTED_STYLES={"s7emailshare":["width","height"]};f.share.EmailShare.prototype.btnClick=function(){this.emaildialog.setEmailService(this.emailurl);this.emaildialog.setServerUrl(this.serverUrl);this.emaildialog.setContentUrl(this.contentUrl?this.contentUrl:"");this.emaildialog.setContentTitle(this.titleStr?this.titleStr:"");this.emaildialog.setOriginUrl(this.originURL?this.originURL:"");this.emaildialog.setThumbnail(this.thumbnail);this.emaildialog.setDescription(this.descrStr?this.descrStr:"");this.emaildialog.show();var h=new f.event.SocialEvent(f.event.SocialEvent.NOTF_SOCIAL_ACTIVATED,true);this.dispatchEvent(h);var g=new f.UserEvent(f.UserEvent.SOCIAL_SHARING,"email",true);this.dispatchEvent(g);this.obj.setAttribute("tabindex",-1)};f.share.EmailShare.prototype.getParameters=function(){var g=this.emaildialog.getDialogData();g.contentUrl=this.contentUrl?this.contentUrl:"";g.titleStr=this.titleStr?this.titleStr:"";g.originURL=this.originURL?this.originURL:"";g.thumbnail=this.thumbnail;g.descrStr=this.descrStr?this.descrStr:"";return g};f.share.EmailShare.prototype.setParameters=function(g){this.contentUrl=g.contentUrl;this.titleStr=g.titleStr;this.originURL=g.originURL;this.thumbnail=g.thumbnail;this.descrStr=g.descrStr;this.emaildialog.setDialogData(g)};f.share.EmailShare.prototype.setContentUrl=function(g){this.contentUrl=g};f.share.EmailShare.prototype.setOriginUrl=function(g){this.originURL=g};f.share.EmailShare.prototype.setContentTitle=function(g){this.titleStr=g};f.share.EmailShare.prototype.setThumbnail=function(g){this.thumbnail=g};f.share.EmailShare.prototype.addEventListener=function(i,h,g){f.Base.prototype.addEventListener.apply(this,[i,h,g])};f.share.EmailShare.prototype.setDescription=function(g){this.descrStr=g};f.share.EmailShare.prototype.setModifier=function(g){throw new Error("Trying to use setModifier on the Core class (EmailShare) is unsupported! Please refer to SDK documentation on using setModifier.")};f.share.EmailShare.prototype.setCSS=function(i,h,g){if(this.isRestrictedCSSProperty(f.share.EmailShare.RESTRICTED_STYLES,h)){throw new Error("You cannot set "+i+" : "+h+" CSS property for this component ")}else{this.superclass.superclass.superclass.prototype.setCSS.apply(this,[i,h,g])}};f.share.EmailShare.prototype.cleanUp=function(){f.Event.removeDOMListener(this,"touchstart",this.ontouchHandler,{passive:false});this.removeEventListener("click",this.onclickHandler,false);if(this.emaildialog){this.emaildialog.dispose()}this.superproto.cleanUp.apply(this)};f.share.EmailShare.prototype.dispose=function(){this.cleanUp();if(this.obj){if(this.obj.parentElement){this.obj.parentElement.removeChild(this.obj)}}};(function a(){f.share.buttonsDefaultCSS("EmailShare",".s7emailshare",["emailbtn_up.png","emailbtn_over.png","emailbtn_over.png","emailbtn_up.png"])})()}if(!f.share.EmbedShareControl){f.share.EmbedShareControl=function(g){arguments.callee.superclass.apply(this,[g,f.share.EmbedShareControl.NS,g.constructor,f.share.EmbedShare.RESTRICTED_STYLES]);var h=this;this.component.embeddialog.addEventListener(f.event.ControlComponentEvent.NOTF_CONTROLCOMPONENT_CSSUPDATED,function(j){var i=j.s7event.data;h.dispatchEvent(new f.event.ControlComponentEvent(f.event.ControlComponentEvent.NOTF_CONTROLCOMPONENT_CSSUPDATED,{id:h.component.embeddialog.getObj().id,classname:i.classname,property:i.property,value:i.value},false))},false)};f.share.EmbedShareControl.NS="s7sdk.share.EmbedShareControl";f.share.EmbedShareControl.prototype.setCSS=function(k,j,i){if(this.component){function h(l){return l.replace(/\./g,"")}var g=h(k);if(g==this.component.cl||g.indexOf(this.component.cl)==0){this.superclass.prototype.setCSS.apply(this,[k,j,i])}else{g=g.split(" ");if(g[0]==this.component.embeddialog.component.cl){this.component.embeddialog.setCSS(k,j,i)}}}};f.share.EmbedShareControl.prototype.rebuild=function(i){if(this.component){var g=this.component.embeddialog;var h=this.component.getParameters();this.superproto.rebuild.apply(this,[i]);this.component.embeddialog=g;this.component.setParameters(h)}}}f.Class.inherits(f.share.EmbedShareControl.NS,"s7sdk.ControlComponent");if(!f.share.EmbedShare){f.share.EmbedShare=function EmbedShare(h,k,j){f.Logger.log(f.Logger.CONFIG,"s7sdk.share.EmbedShare constructor - containerId: %0, settings: %1 , compId: %2",h,k,j);var g=document.getElementById(h);if(g&&(g.s7base instanceof f.share.SocialShare)){h=g.s7base.getPanelId()}j=(typeof j=="string"&&j.length)?j:"EmbedShare_"+f.Util.createUniqueId();var m=!!arguments[3];arguments.callee.superclass.apply(this,[j,h,null,0,0,"s7embedshare",k,parent,!m]);this.cl="s7embedshare";this.obj.setAttribute("tabindex",-1);this.obj.setAttribute("role","menuitem");var n=this.obj;n.addEventListener("focusout",function(){d(n)},false);n.addEventListener("focus",function(){c(n,"left:1178px; top:72px;")},false);var l=this;var i=false;this.ontouchHandler=function(o){i=true};f.Event.addDOMListener(this,"touchstart",this.ontouchHandler,{passive:false});this.onclickHandler=function(o){if(!(f.browser.supportsTouch())||(o instanceof MouseEvent)||i||l.inKey){if(g&&(g.s7base instanceof f.share.SocialShare)){g.s7base.onSocialClick()}l.btnClick()}i=false};f.Event.addDOMListener(this,"click",this.onclickHandler,false);if(!m){this.embeddialog=new f.share.EmbedDialog(this.id,this.settings,this.id+"_dialog",this.embedsizes,f.share.getDialogSymbols(this),this);return new f.share.EmbedShareControl(this)}else{return this}};f.share.EmbedShare.prototype.cleanUp=function(){f.Event.removeDOMListener(this,"touchstart",this.ontouchHandler,{passive:false});this.removeEventListener("click",this.onclickHandler,false);if(this.embeddialog){this.embeddialog.dispose()}this.superproto.cleanUp.apply(this)};f.share.EmbedShare.prototype.dispose=function(){this.cleanUp();if(this.obj){if(this.obj.parentElement){this.obj.parentElement.removeChild(this.obj)}}};f.Class.inherits("s7sdk.share.EmbedShare","s7sdk.common.Button");f.share.EmbedShare.prototype.symbols={CUSTOM_SIZE_WIDTH:"width",CUSTOM_SIZE_HEIGHT:"height",TOOLTIP:"Embed",HEADER:"Get Embed Code",TOOLTIP_HEADER_CLOSE:"Close",DESCRIPTION:"To get embed code, copy and paste: ",EMBED_SIZE:"Embed Size",CUSTOM_SIZE:"Custom Size",ACTION:"Select All",TOOLTIP_ACTION:"Select All",CANCEL:"Cancel",TOOLTIP_CANCEL:"Cancel",TOOLTIP_SCROLL_UP:"Scroll up",TOOLTIP_SCROLL_DOWN:"Scroll down"};f.share.EmbedShare.DEFAULT_EMBED_SIZES="320,240;640,480,true;1280,960";f.share.EmbedShare.prototype.modifiers={embedsizes:{params:["embedsizes"],defaults:[f.share.EmbedShare.DEFAULT_EMBED_SIZES],parseParams:false}};f.share.EmbedShare.prototype.setCSS=function(i,h,g){if(this.isRestrictedCSSProperty(f.share.EmbedShare.RESTRICTED_STYLES,h)){throw new Error("You cannot set "+i+" : "+h+" CSS property for this component ")}else{this.superclass.superclass.superclass.prototype.setCSS.apply(this,[i,h,g])}};f.share.EmbedShare.RESTRICTED_STYLES={"s7embedshare":["width","height"]};f.share.EmbedShare.prototype.getParameters=function(){var g=this.embeddialog.getDialogData();g.template=this.template;return g};f.share.EmbedShare.prototype.setParameters=function(g){this.template=g.template;g.embedsizes=this.embedsizes;g.template=g.template;this.embeddialog.setDialogData(g)};f.share.EmbedShare.prototype.btnClick=function(){this.embeddialog.setEmbedCode(this.template);this.embeddialog.show();var h=new f.event.SocialEvent(f.event.SocialEvent.NOTF_SOCIAL_ACTIVATED,true);this.dispatchEvent(h);var g=new f.UserEvent(f.UserEvent.SOCIAL_SHARING,"embed",true);this.dispatchEvent(g);this.obj.setAttribute("tabindex",-1)};f.share.EmbedShare.prototype.addEventListener=function(i,h,g){f.Base.prototype.addEventListener.apply(this,[i,h,g])};f.share.EmbedShare.prototype.setEmbedCode=function(g){this.template=g};f.share.EmbedShare.prototype.setModifier=function(g){throw new Error("Trying to use setModifier on the Core class (EmbedShare) is unsupported! Please refer to SDK documentation on using setModifier.")};(function a(){f.share.buttonsDefaultCSS("EmbedShare",".s7embedshare",["embedbtn_up.png","embedbtn_over.png","embedbtn_over.png","embedbtn_up.png"])})()}if(!f.share.LinkShareControl){f.share.LinkShareControl=function(g){arguments.callee.superclass.apply(this,[g,f.share.LinkShareControl.NS,g.constructor,f.share.LinkShare.RESTRICTED_STYLES]);var h=this;this.component.linkdialog.addEventListener(f.event.ControlComponentEvent.NOTF_CONTROLCOMPONENT_CSSUPDATED,function(j){var i=j.s7event.data;h.dispatchEvent(new f.event.ControlComponentEvent(f.event.ControlComponentEvent.NOTF_CONTROLCOMPONENT_CSSUPDATED,{id:h.component.linkdialog.getObj().id,classname:i.classname,property:i.property,value:i.value},false))},false)};f.share.LinkShareControl.NS="s7sdk.share.LinkShareControl";f.share.LinkShareControl.prototype.setCSS=function(k,j,i){if(this.component){function h(l){return l.replace(/\./g,"")}var g=h(k);if(g==this.component.cl||g.indexOf(this.component.cl)==0){this.superclass.prototype.setCSS.apply(this,[k,j,i])}else{g=g.split(" ");if(g[0]==this.component.linkdialog.component.cl){this.component.linkdialog.setCSS(k,j,i)}}}};f.share.LinkShareControl.prototype.rebuild=function(i){if(this.component){var g=this.component.linkdialog;var h=this.component.getContentUrl();this.superproto.rebuild.apply(this,[i]);this.component.linkdialog=g;this.component.setContentUrl(h)}}}f.Class.inherits(f.share.LinkShareControl.NS,"s7sdk.ControlComponent");if(!f.share.LinkShare){f.share.LinkShare=function LinkShare(h,k,j){f.Logger.log(f.Logger.CONFIG,"s7sdk.share.LinkShare constructor - containerId: %0, settings: %1 , compId: %2",h,k,j);var g=document.getElementById(h);if(g&&(g.s7base instanceof f.share.SocialShare)){h=g.s7base.getPanelId()}j=(typeof j=="string"&&j.length)?j:"LinkShare_"+f.Util.createUniqueId();var n=!!arguments[3];arguments.callee.superclass.apply(this,[j,h,null,0,0,"s7linkshare",k,parent,!n]);this.cl="s7linkshare";this.obj.setAttribute("tabindex",-1);this.obj.setAttribute("role","menuitem");var l=this.obj;l.addEventListener("focusout",function(){d(l)},false);l.addEventListener("focus",function(){c(l,"left:1194px; top:93px;")},false);var m=this;var i=false;this.ontouchHandler=function(o){i=true};f.Event.addDOMListener(this,"touchstart",this.ontouchHandler,{passive:false});this.onclickHandler=function(o){if(!(f.browser.supportsTouch())||(o instanceof MouseEvent)||i||m.inKey){if(g&&(g.s7base instanceof f.share.SocialShare)){g.s7base.onSocialClick()}m.btnClick()}i=false};f.Event.addDOMListener(this,"click",this.onclickHandler,false);if(!n){this.linkdialog=new f.share.LinkDialog(this.id,this.settings,this.id+"_dialog",f.share.getDialogSymbols(this),this);return new f.share.LinkShareControl(this)}else{return this}};f.share.LinkShare.prototype.getContentUrl=function(){return this.sharedurl};f.share.LinkShare.prototype.cleanUp=function(){f.Event.removeDOMListener(this,"touchstart",this.ontouchHandler,{passive:false});this.removeEventListener("click",this.onclickHandler,false);if(this.linkdialog){this.linkdialog.dispose()}this.superproto.cleanUp.apply(this)};f.share.LinkShare.prototype.dispose=function(){this.cleanUp();if(this.obj){if(this.obj.parentElement){this.obj.parentElement.removeChild(this.obj)}}};f.Class.inherits("s7sdk.share.LinkShare","s7sdk.common.Button");f.share.LinkShare.prototype.symbols={LINK_URL:"Link URL",TOOLTIP:"Link",HEADER:"Share Link",TOOLTIP_HEADER_CLOSE:"Close",DESCRIPTION:"To share this link, copy and paste:",ACTION:"Select All",TOOLTIP_ACTION:"Select All",CANCEL:"Cancel",TOOLTIP_CANCEL:"Cancel"};f.share.LinkShare.prototype.setCSS=function(i,h,g){if(this.isRestrictedCSSProperty(f.share.LinkShare.RESTRICTED_STYLES,h)){throw new Error("You cannot set "+i+" : "+h+" CSS property for this component ")}else{this.superclass.superclass.superclass.prototype.setCSS.apply(this,[i,h,g])}};f.share.LinkShare.RESTRICTED_STYLES={"s7linkshare":["width","height"]};f.share.LinkShare.prototype.btnClick=function(){this.linkdialog.setContentUrl(this.sharedurl?this.sharedurl:location.href);this.linkdialog.show();var h=new f.event.SocialEvent(f.event.SocialEvent.NOTF_SOCIAL_ACTIVATED,true);this.dispatchEvent(h);var g=new f.UserEvent(f.UserEvent.SOCIAL_SHARING,"link",true);this.dispatchEvent(g);this.obj.setAttribute("tabindex",-1)};f.share.LinkShare.prototype.addEventListener=function(i,h,g){f.Base.prototype.addEventListener.apply(this,[i,h,g])};f.share.LinkShare.prototype.setContentUrl=function(g){this.sharedurl=g};(function a(){f.share.buttonsDefaultCSS("LinkShare",".s7linkshare",["linkbtn_up.png","linkbtn_over.png","linkbtn_over.png","linkbtn_up.png"])})()}if(!f.share.FacebookShareControl){f.share.FacebookShareControl=function(g){arguments.callee.superclass.apply(this,[g,f.share.FacebookShareControl.NS,g.constructor,f.share.FacebookShare.RESTRICTED_STYLES])};f.share.FacebookShareControl.NS="s7sdk.share.FacebookShareControl"}f.Class.inherits(f.share.FacebookShareControl.NS,"s7sdk.ControlComponent");if(!f.share.FacebookShare){f.share.FacebookShare=function FacebookShare(i,l,k){f.Logger.log(f.Logger.CONFIG,"s7sdk.share.FacebookShare constructor - containerId: %0, settings: %1 , compId: %2",i,l,k);var h=document.getElementById(i);if(h&&(h.s7base instanceof f.share.SocialShare)){i=h.s7base.getPanelId()}var n=!!arguments[3];arguments.callee.superclass.apply(this,[k,i,null,0,0,"s7facebookshare",l,!n]);this.cl="s7facebookshare";this.obj.setAttribute("tabindex",-1);this.obj.setAttribute("role","menuitem");var g=this.obj;g.addEventListener("focusout",function(){d(g)},false);g.addEventListener("focus",function(){c(g,"left:1166px; top:143px;")},false);this.url="";var m=this;var j=false;this.ontouchHandler=function(o){j=true};f.Event.addDOMListener(this,"touchstart",this.ontouchHandler,{passive:false});this.onclickHandler=function(o){if(!(f.browser.supportsTouch())||(o instanceof MouseEvent)||j||m.inKey){if(h&&(h.s7base instanceof f.share.SocialShare)){h.s7base.onSocialClick()}m.btnClick()}j=false};f.Event.addDOMListener(this,"click",this.onclickHandler,false);if(!n){return new f.share.FacebookShareControl(this)}else{return this}};f.Class.inherits("s7sdk.share.FacebookShare","s7sdk.common.Button");f.share.FacebookShare.prototype.symbols={TOOLTIP:"Facebook"};f.share.FacebookShare.prototype.setCSS=function(i,h,g){if(this.isRestrictedCSSProperty(f.share.FacebookShare.RESTRICTED_STYLES,h)){throw new Error("You cannot set "+i+" : "+h+" CSS property for this component ")}else{this.superclass.superclass.superclass.prototype.setCSS.apply(this,[i,h,g])}};f.share.FacebookShare.RESTRICTED_STYLES={"s7facebookshare":["width","height"]};f.share.FacebookShare.prototype.setContentUrl=function(g){this.url=g};f.share.FacebookShare.prototype.btnClick=function(){var g;if(f.Util.isNonEmptyString(this.url)){g=encodeURIComponent(this.url)}else{g=encodeURIComponent(document.location.href)}window.open("https://www.facebook.com/sharer/sharer.php?u="+g,"facebooksharedialog",f.share.FacebookShare.createSizeString(400,500));var i=new f.event.SocialEvent(f.event.SocialEvent.NOTF_SOCIAL_ACTIVATED,true);this.dispatchEvent(i);var h=new f.UserEvent(f.UserEvent.SOCIAL_SHARING,"facebook",true);this.dispatchEvent(h);this.obj.setAttribute("tabindex",-1)};f.share.FacebookShare.createSizeString=function(h,g){var j,i;if(screen.height<g){g=screen.height;i=0}else{i=Math.round((screen.height-g)/2)}if(screen.width<h){j=0;h=screen.width}else{j=Math.round((screen.width-h)/2)}return"width="+h+",height="+g+",left="+j+",top="+i};f.share.FacebookShare.prototype.addEventListener=function(i,h,g){f.Base.prototype.addEventListener.apply(this,[i,h,g])};f.share.FacebookShare.prototype.cleanUp=function(){f.Event.removeDOMListener(this,"touchstart",this.ontouchHandler,{passive:false});this.removeEventListener("click",this.onclickHandler,false);this.superproto.cleanUp.apply(this)};f.share.FacebookShare.prototype.dispose=function(){this.cleanUp();if(this.obj){if(this.obj.parentElement){this.obj.parentElement.removeChild(this.obj)}}};(function a(){f.share.buttonsDefaultCSS("FacebookShare",".s7facebookshare",["facebookbtn_up.png","facebookbtn_over.png","facebookbtn_over.png","facebookbtn_up.png"])})()}if(!f.share.TwitterShareControl){f.share.TwitterShareControl=function(g){arguments.callee.superclass.apply(this,[g,f.share.TwitterShareControl.NS,g.constructor,f.share.TwitterShare.RESTRICTED_STYLES])};f.share.TwitterShareControl.NS="s7sdk.share.TwitterShareControl"}f.Class.inherits(f.share.TwitterShareControl.NS,"s7sdk.ControlComponent");if(!f.share.TwitterShare){f.share.TwitterShare=function TwitterShare(h,k,j){f.Logger.log(f.Logger.CONFIG,"s7sdk.share.TwitterShare constructor - containerId: %0, settings: %1 , compId: %2",h,k,j);var g=document.getElementById(h);if(g&&(g.s7base instanceof f.share.SocialShare)){h=g.s7base.getPanelId()}this.message=null;this.url=null;var n=!!arguments[3];arguments.callee.superclass.apply(this,[j,h,null,0,0,"s7twittershare",k,!n]);this.cl="s7twittershare";this.obj.setAttribute("tabindex",-1);this.obj.setAttribute("role","menuitem");var l=this.obj;l.addEventListener("focusout",function(){d(l)},false);l.addEventListener("focus",function(){c(l,"left:1182px; top:110px;")},false);var m=this;var i=false;this.ontouchHandler=function(o){i=true};f.Event.addDOMListener(this,"touchstart",this.ontouchHandler,{passive:false});this.onclickHandler=function(o){if(!(f.browser.supportsTouch())||(o instanceof MouseEvent)||i||m.inKey){if(g&&(g.s7base instanceof f.share.SocialShare)){g.s7base.onSocialClick()}m.btnClick()}i=false};f.Event.addDOMListener(this,"click",this.onclickHandler,false);if(!n){return new f.share.TwitterShareControl(this)}else{return this}};f.Class.inherits("s7sdk.share.TwitterShare","s7sdk.common.Button");f.share.TwitterShare.prototype.symbols={TOOLTIP:"Twitter"};f.share.TwitterShare.RESTRICTED_STYLES={"s7twittershare":["width","height"]};f.share.TwitterShare.prototype.setMessage=function(g){this.message=g};f.share.TwitterShare.prototype.setContentUrl=function(g){this.url=g};f.share.TwitterShare.prototype.btnClick=function(){var g="";if(f.Util.isNonEmptyString(this.url)){g+="?url=";g+=encodeURIComponent(this.url)}else{g+="?url="+encodeURIComponent(document.location.href)}if(f.Util.isNonEmptyString(this.message)){g+=g.length>0?"&":"?";g+="text=";g+=this.message}window.open("https://twitter.com/share"+g,"twittersharedialog",f.share.FacebookShare.createSizeString(626,436));var i=new f.event.SocialEvent(f.event.SocialEvent.NOTF_SOCIAL_ACTIVATED,true);this.dispatchEvent(i);var h=new f.UserEvent(f.UserEvent.SOCIAL_SHARING,"twitter",true);this.dispatchEvent(h);this.obj.setAttribute("tabindex",-1)};f.share.TwitterShare.prototype.addEventListener=function(i,h,g){f.Base.prototype.addEventListener.apply(this,[i,h,g])};f.share.TwitterShare.prototype.cleanUp=function(){f.Event.removeDOMListener(this,"touchstart",this.ontouchHandler,{passive:false});this.removeEventListener("click",this.onclickHandler,false);this.superproto.cleanUp.apply(this)};f.share.TwitterShare.prototype.dispose=function(){this.cleanUp();if(this.obj){if(this.obj.parentElement){this.obj.parentElement.removeChild(this.obj)}}};f.share.TwitterShare.prototype.setCSS=function(i,h,g){if(this.isRestrictedCSSProperty(f.share.TwitterShare.RESTRICTED_STYLES,h)){throw new Error("You cannot set "+i+" : "+h+" CSS property for this component ")}else{this.superclass.superclass.superclass.prototype.setCSS.apply(this,[i,h,g])}};(function a(){f.share.buttonsDefaultCSS("TwitterShare",".s7twittershare",["twitterbtn_up.png","twitterbtn_over.png","twitterbtn_over.png","twitterbtn_up.png"])})()}if(!f.share.SocialShareControl){f.share.SocialShareControl=function(g){arguments.callee.superclass.apply(this,[g,f.share.SocialShareControl.NS,g.constructor,f.share.SocialShare.RESTRICTED_STYLES])};f.share.SocialShareControl.NS="s7sdk.share.SocialShareControl";f.share.SocialShareControl.prototype.rebuild=function(k){if(this.component){var j=this.component.socCntrSp.childNodes;var g=[];if(j&&(j.length!=0)){for(var h=0;h<j.length;h++){g.push(j[h])}}this.superproto.rebuild.apply(this,[k]);if(g.length!=0){for(var h=0;h<g.length;h++){this.component.socCntrSp.appendChild(g[h])}}}};f.share.SocialShareControl.prototype.getSocialBtn=function(){return this.component.socialbtn}}f.Class.inherits(f.share.SocialShareControl.NS,"s7sdk.ControlComponent");if(!f.share.SocialShare){f.share.SocialShare=function SocialShare(g,i,h){var j=!!arguments[3];h=(typeof h=="string"&&h.length)?h:"SocShare_"+f.Util.createUniqueId();f.Logger.log(f.Logger.CONFIG,"s7sdk.share.SocialShare constructor - container: %0, settings: %1 , compId: %2",g,i,h);arguments.callee.superclass.apply(this,[h,g,"div","s7socialshare",i,!j]);this.isTouch=f.browser.device.name!="desktop";this.stepSize=50;this.duration=300;this.delaytohide=2000;this.waitToHide=-1;this.state=0;this.lastMouse={x:-1000000,y:-1000000};this.container=this.getParent();this.trackedComponents=[];this.wid=parseInt(f.Util.css.getCss("s7socialshare","width",h,null,this.container));this.hei=parseInt(f.Util.css.getCss("s7socialshare","height",h,null,this.container));this.createComponent();if(!j){return new f.share.SocialShareControl(this)}else{return this}};f.Class.inherits("s7sdk.share.SocialShare","s7sdk.UIComponent");f.share.SocialShare.prototype.modifiers={bearing:{params:["bearing"],defaults:["left"],ranges:[["up","left","right","down","fit-vertical","fit-lateral"]]}};f.share.SocialShare.prototype.symbols={TOOLTIP:"Social Share"};f.share.SocialShare.RESTRICTED_STYLES={"s7socialshare":["width","height"],"s7socialshare s7socialbutton":["width","height"]};f.share.SocialShare.prototype.createComponent=function(){this.createElement();this.attachToContainer();this.obj.setAttribute("aria-hidden","false");this.socialbtn=new f.share.DlgActionButton(this.id,this.settings,this.id+"_socBtn",{TOOLTIP:this.getLocalizedText("TOOLTIP")},"s7socialbutton","div");this.socialbtn.obj.style.position="absolute";var j=this.socialbtn.obj;j.addEventListener("focusout",function(){d(j)},false);j.addEventListener("focus",function(){c(j,"left:1152px; top:34px;")},false);var k=parseInt(f.Util.css.getCss("s7socialbutton","width",this.socialbtn.obj.id,null,this.obj));var g=parseInt(f.Util.css.getCss("s7socialbutton","height",this.socialbtn.obj.id,null,this.obj));if((k!=0)&&(k!=28)&&(g!=0)&&(g!=28)){this.wid=k;this.hei=g}this.getTopContainer();var h=this;this.animate=setInterval(function(){h.enterFrame()},this.stepSize);this.socialbtn.addEventListener("click",function(l){h.onSocialClick()},false);this.socCntr=document.createElement("div");this.socCntr.style.overflow="hidden";this.socCntr.style.position="absolute";this.socCntr.style.top="0px";this.socCntr.style.left="0px";f.Util.setOpacity(this.socCntr,0);this.socCntr.style.pointerEvents="none";this.socCntr.style.fontSize="0px";this.socCntr.style.letterSpacing="0px";this.socCntr.style.wordSpacing="0px";this.obj.appendChild(this.socCntr);this.socCntrSp=document.createElement("div");this.socCntrSp.id=this.id+"_socCtnr";this.socCntrSp.className="s7socialsharepanel";this.socCntrSp.style.position="relative";this.socCntrSp.style.display="inline-block";this.socCntrSp.setAttribute("role","menu");this.socCntrSp.setAttribute("aria-orientation","vertical");this.socCntrSp.setAttribute("aria-hidden","true");this.socCntrSp.setAttribute("aria-live","polite");this.socCntrSp.setAttribute("aria-atomic","true");switch(this.dir){case"L":case"LU":case"LD":case"R":case"RU":case"RD":this.socCntrSp.setAttribute("aria-orientation","horizontal");break;case"U":case"UL":case"UR":case"D":case"DL":case"DR":this.socCntrSp.setAttribute("aria-orientation","vertical");break}this.socCntr.appendChild(this.socCntrSp);this.resize(this.wid,this.hei);this.numFocused=-1;if(this.isTouch){return}this.mouseoverHandler=function(l){h.isOver=true;h.onSocialOver()};f.Event.addDOMListener(this.socialbtn,"mouseover",this.mouseoverHandler);this.mouseoutHandler=function(l){h.isOver=false;h.onSocialOut()};f.Event.addDOMListener(this.socialbtn,"mouseout",this.mouseoutHandler);this.touchstartHandler=function(l){h.isOver=true;h.onSocialOver()};f.Event.addDOMListener(this.socialbtn,"touchstart",this.touchstartHandler,{passive:false});this.touchendHandler=function(l){h.isOver=false;h.onSocialOut()};f.Event.addDOMListener(this.socialbtn,"touchend",this.touchendHandler,{passive:false});this.winMouseMoveHandler=function(l){h.lastMouse={x:f.Util.getEventPos(l).x,y:f.Util.getEventPos(l).y}};this.winMouseOutHandler=function(l){h.lastMouse={x:-1000000,y:-1000000}};var i=window;f.Event.addDOMListener(i,"mouseout",this.winMouseOutHandler,true);f.Event.addDOMListener(i,"mousemove",this.winMouseMoveHandler,true);this.socialbtn.obj.setAttribute("aria-haspopup","true");this.socialbtn.obj.setAttribute("aria-controls",this.socCntrSp.id);this.socialbtn.addEventListener("focus",function(l){h.socialbtnInFocus=true},false);this.socialbtn.addEventListener("blur",function(l){h.socialbtnInFocus=false},false);f.Event.addDOMListener(this,"keydown",function(n){var l=Array.prototype.slice.call(h.socCntrSp.childNodes);for(var m=l.length-1;m>=0;m--){if(l[m].offsetParent===null){l.splice(m,1)}}h.isOver=true;if(l&&l.length>0){if(h.isOver&&h.socialbtnInFocus){if(n.keyCode==f.Enum.KEY_CODE.ENTER||n.keyCode==f.Enum.KEY_CODE.SPACE||n.keyCode==f.Enum.KEY_CODE.LEFT||n.keyCode==f.Enum.KEY_CODE.RIGHT||n.keyCode==f.Enum.KEY_CODE.DOWN||n.keyCode==f.Enum.KEY_CODE.UP){f.Event.preventDefault(n);h.onSocialOver();h.isOver=true;h.numFocused=0;l[h.numFocused].focus()}return}if(n.keyCode==f.Enum.KEY_CODE.TAB&&h.isOver){h.hide();h.waitToHide=-1;h.isOver=false;return}if(n.keyCode==f.Enum.KEY_CODE.ESCAPE){f.Event.preventDefault(n);h.socialbtn.focus();h.hide();h.waitToHide=-1;h.isOver=false;return}switch(h.dir){case"L":case"LU":case"LD":case"R":case"RU":case"RD":if((n.keyCode==f.Enum.KEY_CODE.LEFT)){f.Event.preventDefault(n);if(h.numFocused>0){h.numFocused=h.numFocused-1;l[h.numFocused].focus()}}if((n.keyCode==f.Enum.KEY_CODE.RIGHT)){f.Event.preventDefault(n);if(h.numFocused<l.length-1&&h.numFocused!=-1){h.numFocused=h.numFocused+1;l[h.numFocused].focus()}}break;case"U":case"UL":case"UR":case"D":case"DL":case"DR":if((n.keyCode==f.Enum.KEY_CODE.UP)){f.Event.preventDefault(n);if(h.numFocused>0){h.numFocused=h.numFocused-1;l[h.numFocused].focus()}}if((n.keyCode==f.Enum.KEY_CODE.DOWN)){f.Event.preventDefault(n);if(h.numFocused<l.length-1&&h.numFocused!=-1){h.numFocused=h.numFocused+1;l[h.numFocused].focus()}}break}}},{passive:false})};f.share.SocialShare.prototype.getSize=function(){return{width:this.wid,height:this.hei}};f.share.SocialShare.prototype.getPanelId=function(){return this.socCntrSp.id};f.share.SocialShare.prototype.onSocialOut=function(){this.waitToHide=this.delaytohide};f.share.SocialShare.prototype.onSocialOver=function(){this.show()};f.share.SocialShare.prototype.checkMouse=function(){var i=f.Util.getObjPos(this.socCntr);var h=this.lastMouse.x-i.x;var g=this.lastMouse.y-i.y;return(h>0&&h<this.socCntr.offsetWidth&&g>0&&g<this.socCntr.offsetHeight)};f.share.SocialShare.prototype.onSocialClick=function(){this.focus();if(!(this.state==0||this.state==3)){return}if(!this.isOver){this.show()}else{this.hide()}this.isOver=!this.isOver;this.waitToHide=-1};f.share.SocialShare.prototype.initAnimate=function(){this.step=0;this.shiftSize=this.socCntrSp.offsetHeight;this.stepDuration=Math.ceil(this.shiftSize/(this.duration/this.stepSize));f.Util.css.setCSSAttributeSelector(this.socCntrSp,"state","start")};f.share.SocialShare.prototype.getTopContainer=function(){var i=document.body;var g=this.obj;while(g!=null){g=g.parentNode;if(g!=null){if(typeof(g.s7base)=="object"&&f.common&&f.common.Container&&(g.s7base instanceof f.common.Container)){i=g;break}if(g==document.body){break}var h=f.Util.getStyle(g,"overflow");if(h=="hidden"){i=g;break}}}this.anchorObj=i};f.share.SocialShare.prototype.getTrackedComponents=function(){return this.trackedComponents};f.share.SocialShare.prototype.addTrackedComponent=function(g){this.trackedComponents.push(g)};f.share.SocialShare.prototype.removeTrackedComponent=function(g){for(var h=this.trackedComponents.length;h--;){if(this.trackedComponents[h]===g){this.trackedComponents.splice(h,1)}}};f.share.SocialShare.prototype.getAnchorDimension=function(){var h;var g;this.dim=new f.Rectangle(0,0,0,0);if(this.anchorObj==document.body){if(typeof window.innerWidth!="undefined"){this.dim.width=window.innerWidth;this.dim.height=window.innerHeight}else{if(typeof document.documentElement!="undefined"&&typeof document.documentElement.clientWidth!="undefined"&&document.documentElement.clientWidth!=0){this.dim.width=document.documentElement.clientWidth;this.dim.height=document.documentElement.clientHeight}else{this.dim.width=document.getElementsByTagName("body")[0].clientWidth;this.dim.height=document.getElementsByTagName("body")[0].clientHeight}}}else{this.dim.width=this.anchorObj.clientWidth;this.dim.height=this.anchorObj.clientHeight;var i=f.share.getObjPos(this.anchorObj);this.dim.x=i.x;this.dim.y=i.y}};f.share.SocialShare.prototype.checkRoll=function(g,L){switch(this.bearing){case"up":return"U";case"left":return"L";case"right":return"R";case"down":return"D"}var q=true;var K=true;var r=true;var m=true;var p=true;var D=true;var j=true;var l=true;var M=true;var u=true;var F=true;var C=true;var G=true;var z=g.x,v=g.y,B=g.offsetWidth,I=g.offsetHeight,J=L.x,n=L.y,A=L.offsetWidth,t=L.offsetHeight;if(g.x-L.offsetHeight<this.dim.x){q=false}if(g.x+g.offsetWidth-L.offsetHeight<this.dim.x){K=false;r=false}else{if(g.y-L.offsetWidth<this.dim.y){K=false}if(g.y+g.offsetHeight+L.offsetWidth>this.dim.y+this.dim.height){r=false}}if(g.x+g.offsetWidth+L.offsetHeight>this.dim.x+this.dim.width){m=false}if(g.x+L.offsetHeight>this.dim.x+this.dim.width){p=false;D=false}else{if(g.y-L.offsetWidth<this.dim.y){p=false}if(g.y+g.offsetHeight+L.offsetWidth>this.dim.y+this.dim.height){D=false}}if(g.y-L.offsetHeight<this.dim.y){j=false}if(g.y+g.offsetHeight-L.offsetHeight<this.dim.y){l=false;M=false}else{if(g.x-L.offsetWidth<this.dim.x){l=false}if(g.x+g.offsetWidth+L.offsetWidth>this.dim.x+this.dim.width){M=false}}if(g.y+g.offsetHeight+L.offsetHeight>this.dim.y+this.dim.height){u=false}if(g.y+L.offsetHeight>this.dim.y+this.dim.height){F=false;C=false}else{if(g.x-L.offsetWidth<this.dim.x){F=false}if(g.x+g.offsetWidth+L.offsetWidth>this.dim.x+this.dim.width){C=false}}function k(h,i){return !(h.x>i.x+i.width||h.x+h.width<i.x||h.y>i.y+i.height||h.y+h.height_1<i.y)}if(this.trackedComponents.length>0){for(var H=0;H<this.trackedComponents.length;H++){var o=new f.Rectangle(0,0,0,0);var E=this.trackedComponents[H];if(typeof E.getObj=="function"&&E.getObj()){var s=f.share.getObjPos(E.getObj());o.width=E.getObj().clientWidth;o.height=E.getObj().clientHeight;o.x=s.x;o.y=s.y}else{if(E.clientWidth&&E.clientHeight){var s=f.share.getObjPos(E);o.width=E.clientWidth;o.height=E.clientHeight;o.x=s.x;o.y=s.y}}if(!o.isEmpty()){G=!k(o,new f.Rectangle(z,v,B,I));u=u&&!k(o,new f.Rectangle(z,v,B,I+t));j=j&&!k(o,new f.Rectangle(z,v-t,B,I+t));q=q&&!k(o,new f.Rectangle(z-t,v,B+A,I));m=m&&!k(o,new f.Rectangle(z,v,B+t,I));F=F&&G&&!k(o,new f.Rectangle(z-A,v,A,t));C=C&&G&&!k(o,new f.Rectangle(z+B,v,A,t));l=l&&G&&!k(o,new f.Rectangle(z-A,v+I-t,A,t));M=M&&G&&!k(o,new f.Rectangle(z+B,v+I-t,A,t));p=p&&G&&!k(o,new f.Rectangle(z,v-A,t,A));D=D&&G&&!k(o,new f.Rectangle(z,v+I,t,A));K=K&&G&&!k(o,new f.Rectangle(z+B-t,v-A,t,A));r=r&&G&&!k(o,new f.Rectangle(z+B-t,v+I,t,A))}}}if(this.bearing=="fit-vertical"){if(u){return"D"}else{if(D){return"RD"}else{if(r){return"LD"}else{if(j){return"U"}else{if(p){return"RU"}else{if(K){return"LU"}else{if(m){return"R"}else{if(C){return"DR"}else{if(M){return"UR"}else{if(q){return"L"}else{if(F){return"DL"}else{if(l){return"UL"}}}}}}}}}}}}return"D"}else{if(m){return"R"}else{if(C){return"DR"}else{if(M){return"UR"}else{if(q){return"L"}else{if(F){return"DL"}else{if(l){return"UL"}else{if(u){return"D"}else{if(D){return"RD"}else{if(r){return"LD"}else{if(j){return"U"}else{if(p){return"RU"}else{if(K){return"LU"}}}}}}}}}}}}return"R"}};f.share.SocialShare.prototype.show=function(){if(this.state!=0){return}this.socCntr.style.left="0px";this.socCntr.style.top="0px";this.socCntr.style.width="";this.socCntrSp.style.left="0px";this.socCntrSp.style.display="";this.socCntrSp.style.top="0px";this.updateDisplayStyle("");var h=f.share.getObjPos(this.socCntr);h.offsetWidth=this.socCntr.offsetWidth;h.offsetHeight=this.socCntr.offsetHeight;var j=f.share.getObjPos(this.socialbtn.obj);j.offsetWidth=this.socialbtn.obj.offsetWidth;j.offsetHeight=this.socialbtn.obj.offsetHeight;this.shiftPos={"x":j.x-h.x,"y":j.y-h.y};this.getAnchorDimension();this.dir=this.checkRoll(j,h);switch(this.dir){case"L":case"LU":case"LD":case"R":case"RU":case"RD":this.socCntrSp.setAttribute("aria-orientation","horizontal");break;case"U":case"UL":case"UR":case"D":case"DL":case"DR":this.socCntrSp.setAttribute("aria-orientation","vertical");break}this.initAnimate();this.isShowig=true;var i;this.shiftSize_A=this.shiftSize;switch(this.dir){case"L":this.socCntr.style.left=-this.shiftSize+"px";this.socCntr.style.width=this.shiftSize+"px";this.socCntrSp.style.left=this.shiftSize+"px";i=true;break;case"LU":this.socCntr.style.left=-this.shiftSize+j.offsetWidth+"px";this.socCntr.style.width=this.shiftSize+"px";this.socCntr.style.top=-j.offsetHeight+"px";this.socCntrSp.style.left=this.shiftSize+"px";i=true;break;case"LD":this.socCntr.style.left=-this.shiftSize+j.offsetWidth+"px";this.socCntr.style.width=this.shiftSize+"px";this.socCntr.style.top=j.offsetHeight+"px";this.socCntrSp.style.left=this.shiftSize+"px";i=true;break;case"R":this.socCntr.style.left=j.offsetWidth+"px";this.socCntr.style.width=this.shiftSize+"px";this.socCntrSp.style.left=-this.shiftSize+"px";i=true;break;case"RU":this.socCntr.style.left="0px";this.socCntr.style.width=this.shiftSize+"px";this.socCntr.style.top=-j.offsetHeight+"px";this.socCntrSp.style.left=-this.shiftSize+"px";i=true;break;case"RD":this.socCntr.style.left="0px";this.socCntr.style.width=this.shiftSize+"px";this.socCntr.style.top=j.offsetHeight+"px";this.socCntrSp.style.left=-this.shiftSize+"px";i=true;break;case"U":this.socCntr.style.left="0px";this.socCntr.style.top=-this.shiftSize+"px";this.socCntrSp.style.top=this.shiftSize+"px";i=false;break;case"UL":this.socCntr.style.left=-j.offsetWidth+"px";this.socCntr.style.top=-this.shiftSize+j.offsetHeight+"px";this.socCntrSp.style.top=this.shiftSize+"px";i=false;break;case"UR":this.socCntr.style.left=j.offsetWidth+"px";this.socCntr.style.top=-this.shiftSize+j.offsetHeight+"px";this.socCntrSp.style.top=this.shiftSize+"px";i=false;break;case"D":this.socCntr.style.left="0px";this.socCntr.style.top=j.offsetHeight+"px";this.socCntrSp.style.top=-this.shiftSize+"px";i=false;break;case"DL":this.socCntr.style.left=-j.offsetWidth+"px";this.socCntr.style.top="0px";this.socCntrSp.style.top=-this.shiftSize+"px";i=false;break;case"DR":this.socCntr.style.left=j.offsetWidth+"px";this.socCntr.style.top="0px";this.socCntrSp.style.top=-this.shiftSize+"px";i=false;break}f.Util.setOpacity(this.socCntr,1);this.socCntr.style.pointerEvents="auto";if(i){this.updateDisplayStyle("inline-block")}else{var g=f.Util.css.getCss("s7socialshare","position",this.obj.id,null,this.container);if(g=="relative"||g=="static"){this.updateDisplayStyle("block")}}this.socCntr.style.left=parseInt(this.socCntr.style.left)+this.shiftPos.x+"px";this.socCntr.style.top=parseInt(this.socCntr.style.top)+this.shiftPos.y+"px";this.socCntrSp.setAttribute("aria-hidden","false");this.state=1;this.socialbtn.obj.setAttribute("aria-expanded","true")};f.share.SocialShare.prototype.hide=function(){this.step=0;this.stepDuration=Math.ceil(this.shiftSize_A/(this.duration/this.stepSize));this.isShowig=false;this.socCntr.style.overflow="hidden";this.socialbtn.obj.setAttribute("aria-expanded","false");this.socCntrSp.setAttribute("aria-hidden","true")};f.share.SocialShare.prototype.hidePanel=function(){if(this.state==0){return}this.isOver=false;this.state=2;this.hide()};f.share.SocialShare.prototype.updateDisplayStyle=function(h){var j=this.socCntrSp.childNodes;for(var g=0;g<j.length;g++){if(f.Util.getStyle(j[g],"display")=="none"){continue}if(j[g].style.display!=h){j[g].style.display=h;j[g].style.zoom=1}}};f.share.SocialShare.prototype.enterFrame=function(){switch(this.state){case 0:break;case 1:this.slideStep();break;case 2:this.slideStep();break;case 3:if(!this.isOver){if(!this.isTouch){if(this.checkMouse()){return}}this.waitToHide-=this.stepSize;if(this.waitToHide<0){this.hide();f.Util.css.setCSSAttributeSelector(this.socCntrSp,"state","start");this.state=2}}break}};f.share.SocialShare.prototype.slideStep=function(){var h=new Date().getTime();if(this.step==0){this.sttime=h}var g=(this.isShowig?this.shiftSize_A-this.stepDuration*this.step:this.stepDuration*this.step);g=g<0?0:g;g=g>this.shiftSize_A?this.shiftSize_A:g;switch(this.dir){case"L":case"LU":case"LD":this.socCntrSp.style.left=g+"px";break;case"R":case"RU":case"RD":this.socCntrSp.style.left=-g+"px";break;case"U":case"UL":case"UR":this.socCntrSp.style.top=g+"px";break;case"D":case"DL":case"DR":this.socCntrSp.style.top=-g+"px";break}if((this.stepDuration*this.step>this.shiftSize_A)&&(g==0||g==this.shiftSize_A)){this.step=0;if(this.state==2){this.socCntr.style.width="0px";f.Util.setOpacity(this.socCntr,0);this.socCntr.style.pointerEvents="none";this.socCntr.style.left="0px";this.socCntrSp.style.left="0px";this.socCntrSp.style.top="0px";this.socCntr.style.width="auto";this.socCntr.style.overflow="hidden";this.state=0;f.Util.css.setCSSAttributeSelector(this.socCntrSp,"state","")}else{this.socCntr.style.overflow="visible";this.waitToHide=this.delaytohide;this.state=3;f.Util.css.setCSSAttributeSelector(this.socCntrSp,"state","")}}this.step++};f.share.SocialShare.prototype.resize=function(k,h){f.Logger.log(f.Logger.FINE,"SocialShare.resize %0: %1x%2",this.id,k,h);this.socCntr.style.width="0px";f.Util.setOpacity(this.socCntr,0);this.socCntr.style.pointerEvents="none";this.socCntr.style.left="0px";this.socCntrSp.style.left="0px";this.socCntrSp.style.top="0px";this.socCntr.style.width="auto";this.socCntr.style.overflow="hidden";this.state=0;this.wid=k;this.hei=h;this.obj.style.width=k+"px";this.obj.style.height=h+"px";this.socialbtn.resize(k,h);var l=this.socCntrSp.childNodes;for(var j=0;j<l.length;j++){var g=l[j];if(g.button){g.button.resize(k,h)}}};f.share.SocialShare.prototype.getWidth=function(){return this.wid};f.share.SocialShare.prototype.getHeight=function(){return this.hei};f.share.SocialShare.prototype.activate=function(){var g=this.socCntrSp.childNodes;if(g&&g.length>0){if(this.numFocused!=-1){}else{this.numFocused=0}}this.enableEvents();this.socialbtn.activate();this.activated=true};f.share.SocialShare.prototype.deactivate=function(){var g=this.socCntrSp.childNodes;if(g){for(var h=0;h<g.length;h++){g[h].setAttribute("tabindex",-1)}}this.disableEvents();this.socialbtn.deactivate();this.activated=false};f.share.SocialShare.prototype.focus=function(){this.socialbtn.focus()};f.share.SocialShare.prototype.blur=function(){this.socialbtn.blur()};f.share.SocialShare.prototype.cleanUp=function(){if(this.animate){clearInterval(this.animate);this.animate=null}var g=window;f.Event.removeDOMListener(g,"mouseout",this.winMouseOutHandler,true);f.Event.removeDOMListener(g,"mousemove",this.winMouseMoveHandler,true);this.winMouseMoveHandler=null;this.winMouseOutHandler=null;f.Util.removeTags(this.obj);this.obj.style.cssText=""};f.share.SocialShare.prototype.dispose=function(){this.cleanUp();if(this.obj){if(this.obj.parentElement){this.obj.parentElement.removeChild(this.obj)}}};f.share.SocialShare.prototype.setModifier=function(g){throw new Error("Trying to use setModifier on the Core class (SocialShare) is unsupported! Please refer to SDK documentation on using setModifier.")};f.share.SocialShare.prototype.setCSS=function(i,h,g){if(this.isRestrictedCSSProperty(f.share.SocialShare.RESTRICTED_STYLES,h)){throw new Error("You cannot set "+i+" : "+h+" CSS property for this component ")}else{this.superclass.superclass.prototype.setCSS.apply(this,[i,h,g])}};(function a(){var i=f.Util.css.createCssRuleText;var g=i(".s7socialshare",{"-webkit-transform":"translateZ(0px)","width":"28px","height":"28px"})+i(".s7socialshare .s7socialbutton",{"background-color":"#e7e7e7"})+i(".s7socialshare .s7socialsharepanel[state='start']",{"-webkit-transform":"translateZ(0px)"})+i(".s7socialshare .s7socialsharepanel",{"font-size":"0px","letter-spacing":"0px","word-spacing":"0px","background-color":"#e7e7e7"});var h=f.share.buttonsDefaultCSS("",".s7socialshare .s7socialbutton",["socialbtn_up.png","socialbtn_over.png","socialbtn_over.png","socialbtn_up.png"],null,true);g=h+g;f.Util.css.addDefaultCSS(g,"SocialShare")})()}if(!f.share.CustomComboBox){f.share.CustomComboBox=function CustomComboBox(g,k,i,n,m,l,j){f.Logger.log(f.Logger.CONFIG,"s7sdk.share.CustomComboBox constructor - containerId: %0, settings: %1 , compId: %2",g,k,i);var h=n?n:"div";arguments.callee.superclass.apply(this,[i,g,h,"s7combobox",k]);this.ddContainer=l;this.containertyp=h;this.parenObject=m;this.mainLabelId=" "+j;this.compId=(f.Util.isNull(i)?"":i);if((g!=null)&&(f.Util.byId(g))){this.container=f.Util.byId(g)}else{this.container=document.body}this.createCBox();this.idxSelected=-1;this.isExpanded=false;this.changeState(f.share.CustomComboBox.EXPANDED)};f.Class.inherits("s7sdk.share.CustomComboBox","s7sdk.UIComponent");f.share.CustomComboBox.EXPANDED=0;f.share.CustomComboBox.ShRINKED=1;f.share.CustomComboBox.ITEMSTATE="state";f.share.CustomComboBox.SELECTED="selected";f.share.CustomComboBox.UN_SELECTED="unselected";f.share.CustomComboBox.prototype.symbols={TOOLTIP:"Select"};f.share.CustomComboBox.prototype.createCBox=function(){this.createElement();this.container.appendChild(this.obj);this.obj.setAttribute("tabindex",0);this.obj.setAttribute("role","button");this.obj.setAttribute("aria-expanded","false");this.obj.setAttribute("aria-haspopup","listbox");if(!this.ddContainer){this.ddContainer=this.obj}this.createInput();var g=this;this.obj.addEventListener("focus",function(){g.inFocus=true});this.obj.addEventListener("blur",function(){g.inFocus=false});this.clickHandler=function(h){if(!g.isExpanded){g.onExpand()}else{g.selectByIdx(g.idxSelected);g.hideDropDn()}};this.addEventListener("click",this.clickHandler,false);this.keyDownHandler=function(h){if(g.items&&g.items.length>0){if(g.inFocus){if(h.keyCode==f.Enum.KEY_CODE.TAB){if(!g.isExpanded){g.obj.focus();return}if(g.idxSelected<g.items.length-1&&g.idxSelected!=-1){f.Util.css.setCSSAttributeSelector(g.items[g.idxSelected],f.share.CustomComboBox.ITEMSTATE,f.share.CustomComboBox.UN_SELECTED);g.idxSelected=g.idxSelected+1;f.Util.css.setCSSAttributeSelector(g.items[g.idxSelected],f.share.CustomComboBox.ITEMSTATE,f.share.CustomComboBox.SELECTED)}else{f.Util.css.setCSSAttributeSelector(g.items[g.idxSelected],f.share.CustomComboBox.ITEMSTATE,f.share.CustomComboBox.UN_SELECTED);g.idxSelected=0;f.Util.css.setCSSAttributeSelector(g.items[g.idxSelected],f.share.CustomComboBox.ITEMSTATE,f.share.CustomComboBox.SELECTED)}f.Event.preventDefault(h);return}f.Event.preventDefault(h);if(h.keyCode==f.Enum.KEY_CODE.ESCAPE&&g.isExpanded){g.hideDropDn();g.obj.focus();f.Event.stopPropagation(h)}if(!g.isExpanded){if(h.keyCode==f.Enum.KEY_CODE.SPACE||h.keyCode==f.Enum.KEY_CODE.ENTER){g.onExpand()}if((h.keyCode==f.Enum.KEY_CODE.UP)){g.onExpand();if(g.idxSelected>0){f.Util.css.setCSSAttributeSelector(g.items[g.idxSelected],f.share.CustomComboBox.ITEMSTATE,f.share.CustomComboBox.UN_SELECTED);g.idxSelected=g.idxSelected-1;f.Util.css.setCSSAttributeSelector(g.items[g.idxSelected],f.share.CustomComboBox.ITEMSTATE,f.share.CustomComboBox.SELECTED)}}if((h.keyCode==f.Enum.KEY_CODE.DOWN)){g.onExpand();if(g.idxSelected<g.items.length-1&&g.idxSelected!=-1){f.Util.css.setCSSAttributeSelector(g.items[g.idxSelected],f.share.CustomComboBox.ITEMSTATE,f.share.CustomComboBox.UN_SELECTED);g.idxSelected=g.idxSelected+1;f.Util.css.setCSSAttributeSelector(g.items[g.idxSelected],f.share.CustomComboBox.ITEMSTATE,f.share.CustomComboBox.SELECTED)}}if((h.keyCode==f.Enum.KEY_CODE.HOME)||(h.keyCode==f.Enum.KEY_CODE.PAGE_UP)){if(g.getSelectedIdx()>0){g.selectByIdx(0)}}if((h.keyCode==f.Enum.KEY_CODE.END)||(h.keyCode==f.Enum.KEY_CODE.PAGE_DOWN)){if(g.getSelectedIdx()<g.items.length-1){g.selectByIdx(g.items.length-1)}}}else{if((h.keyCode==f.Enum.KEY_CODE.UP)){if(g.idxSelected>0){f.Util.css.setCSSAttributeSelector(g.items[g.idxSelected],f.share.CustomComboBox.ITEMSTATE,f.share.CustomComboBox.UN_SELECTED);g.idxSelected=g.idxSelected-1;f.Util.css.setCSSAttributeSelector(g.items[g.idxSelected],f.share.CustomComboBox.ITEMSTATE,f.share.CustomComboBox.SELECTED)}}if((h.keyCode==f.Enum.KEY_CODE.DOWN)){if(g.idxSelected<g.items.length-1&&g.idxSelected!=-1){f.Util.css.setCSSAttributeSelector(g.items[g.idxSelected],f.share.CustomComboBox.ITEMSTATE,f.share.CustomComboBox.UN_SELECTED);g.idxSelected=g.idxSelected+1;f.Util.css.setCSSAttributeSelector(g.items[g.idxSelected],f.share.CustomComboBox.ITEMSTATE,f.share.CustomComboBox.SELECTED)}}if((h.keyCode==f.Enum.KEY_CODE.HOME)||(h.keyCode==f.Enum.KEY_CODE.PAGE_UP)){if(g.idxSelected>0){f.Util.css.setCSSAttributeSelector(g.items[g.idxSelected],f.share.CustomComboBox.ITEMSTATE,f.share.CustomComboBox.UN_SELECTED);g.idxSelected=0;f.Util.css.setCSSAttributeSelector(g.items[g.idxSelected],f.share.CustomComboBox.ITEMSTATE,f.share.CustomComboBox.SELECTED)}}if((h.keyCode==f.Enum.KEY_CODE.END)||(h.keyCode==f.Enum.KEY_CODE.PAGE_DOWN)){if(g.idxSelected<g.items.length-1&&g.idxSelected!=-1){f.Util.css.setCSSAttributeSelector(g.items[g.idxSelected],f.share.CustomComboBox.ITEMSTATE,f.share.CustomComboBox.UN_SELECTED);g.idxSelected=g.items.length-1;f.Util.css.setCSSAttributeSelector(g.items[g.idxSelected],f.share.CustomComboBox.ITEMSTATE,f.share.CustomComboBox.SELECTED)}}if((h.keyCode==f.Enum.KEY_CODE.ENTER)||(h.keyCode==f.Enum.KEY_CODE.SPACE)){g.selectByIdx(g.idxSelected)}g.obj.setAttribute("aria-labelledby",g.items[g.idxSelected].id+g.mainLabelId);g.obj.setAttribute("aria-activedescendant",g.items[g.idxSelected].id)}f.Event.preventDefault(h)}}};f.Event.addDOMListener(this,"keydown",this.keyDownHandler,{passive:false})};f.share.CustomComboBox.prototype.createInput=function(){var g=document.createElement("span");g.className="s7comboboxtext";g.style.width="0px";g.style.verticalAlign="middle";this.obj.appendChild(g);this.obj.txt=document.createTextNode("");this.obj.appendChild(this.obj.txt);this.obj.id=this.id?this.id+"_cbxbutton":"cbxbutton_"+f.Util.createUniqueId();this.cbtn=new f.share.DlgActionButton(this.obj.id,this.settings,null,{TOOLTIP:""},"s7comboboxbutton");this.cbtn.obj.setAttribute("tabindex",-1);var h=this;f.Event.addDOMListener(this.cbtn,"click",function(j){h.lastFocus=document.activeElement;h.cbtn.obj.blur();h.onExpand();f.Event.stopPropagation(j)},false);var i=document.createElement(this.containertyp);i.className="s7comboboxdropdown";i.setAttribute("role","listbox");this.ddContainer.appendChild(i);this.cboxdd=i;this.cboxdd.style.display="none"};f.share.CustomComboBox.prototype.onExpand=function(){this.lastFocus=document.activeElement;if(this.cboxdd.style.display=="none"){if(this.ddContainer.dlgAbsolute){if(this.container.onExpand){this.container.onExpand()}var m=f.share.getObjPos(this.obj);var n=this.ddContainer.dlgAbsolute;n.style.left="0px";n.style.top="0px";var h=f.share.getObjPos(n);n.style.left=(m.x-h.x)+"px";var l=m.y-h.y;var g=Math.max(document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight,document.body.clientHeight,document.documentElement.clientHeight);g=(this.parenObject&&this.parenObject.getContainerHeight)?this.parenObject.getContainerHeight():g;this.cboxdd.style.visibility="hidden";this.cboxdd.style.display="block";if((l+this.obj.offsetHeight+n.offsetHeight+2)<g){l+=(this.obj.offsetHeight+2)}else{l-=(n.offsetHeight+2)}n.style.top=l+"px";n.style.width=this.obj.offsetWidth+"px";this.cboxdd.style.visibility="inherit"}this.cboxdd.style.display="block";for(var j=0;j<this.items.length;j++){f.Util.css.setCSSAttributeSelector(this.items[j],f.share.CustomComboBox.ITEMSTATE,f.share.CustomComboBox.UN_SELECTED)}f.Util.css.setCSSAttributeSelector(this.items[this.getSelectedIdx()],f.share.CustomComboBox.ITEMSTATE,f.share.CustomComboBox.SELECTED);this.idxSelected=this.getSelectedIdx();this.isExpanded=true;this.obj.setAttribute("aria-expanded","true")}else{this.cboxdd.style.display="none";this.isExpanded=false;this.obj.setAttribute("aria-expanded","false")}this.blockScroll=true;var k=this;setTimeout(function(){k.blockScroll=false},500)};f.share.CustomComboBox.prototype.hideDropDn=function(){this.isExpanded=false;this.obj.setAttribute("aria-expanded","false");this.cboxdd.style.display="none"};f.share.CustomComboBox.prototype.addItem=function(l,g){var k=document.createElement("span");k.className="s7dropdownitem";k.setAttribute("aria-label",l);this.cboxdd.appendChild(k);var i=document.createElement("a");i.className="s7dropdownitemanchor";i.setAttribute("role","option");i.setAttribute("aria-selected",g?"true":"false");k.appendChild(i);var h=document.createElement("span");h.className="s7checkmark";h.style.visibility=g?"inherit":"hidden";i.appendChild(h);i.txtnode=document.createTextNode(l);i.appendChild(i.txtnode);i.checked=h;i.val=l;i.idx=this.items.length;i.id=this.id+"_dropdownitem_"+this.items.length;var j=this;f.Event.addDOMListener(i,"click",function(m){j.onSelect(m)},true);this.items.push(i);if(g){this.setSelectedIdx(i.idx)}};f.share.CustomComboBox.prototype.onSelect=function(h){var g=(h.target||h.srcElement);this.selectByObj(g)};f.share.CustomComboBox.prototype.selectByIdx=function(g){var h=this.cboxdd.childNodes;if(g>=0&&g<h.length){this.selectByObj(h[g].childNodes[0]);f.Util.css.setCSSAttributeSelector(h[g].childNodes[0],f.share.CustomComboBox.ITEMSTATE,f.share.CustomComboBox.SELECTED);this.obj.setAttribute("aria-labelledby",h[g].childNodes[0].id+this.mainLabelId)}};f.share.CustomComboBox.prototype.selectByObj=function(g){var j=this.cboxdd.childNodes;for(var h=0;h<j.length;h++){if(j[h].childNodes[0].checked.style.visibility!="hidden"){j[h].childNodes[0].checked.style.visibility="hidden";j[h].childNodes[0].setAttribute("aria-selected","false")}f.Util.css.setCSSAttributeSelector(j[h].childNodes[0],f.share.CustomComboBox.ITEMSTATE,f.share.CustomComboBox.UN_SELECTED)}this.obj.txt.nodeValue=g.val;if(this.parenObject&&this.parenObject.updateTemplate){this.parenObject.updateTemplate(g.val)}g.checked.style.visibility="inherit";g.setAttribute("aria-selected","true");this.obj.setAttribute("aria-labelledby",g.id+this.mainLabelId);this.setSelectedIdx(g.idx);if(this.parenObject&&g.val==this.parenObject.customSizeStr){this.onExpand()}this.hideDropDn()};f.share.CustomComboBox.prototype.changeState=function(g){var h=["true","false"];if(h=="true"){this.isExpanded=true}else{this.isExpanded=false}f.Util.css.setCSSAttributeSelector(this.obj,"expanded",h[g]);this.obj.setAttribute("aria-expanded",h[g])};f.share.CustomComboBox.prototype.update=function(h,j){while(this.cboxdd.lastChild){this.cboxdd.removeChild(this.cboxdd.lastChild)}this.items=[];for(var g=0;g<h.length;g++){if(j==g){this.addItem(h[g],true);this.selected=this.obj.txt.nodeValue=h[g];if(this.parenObject&&this.parenObject.updateTemplate){this.parenObject.updateTemplate(h[g])}}else{this.addItem(h[g],false)}}};f.share.CustomComboBox.prototype.removeItem=function(g){};f.share.CustomComboBox.prototype.getSelectedIdx=function(){return this.selectedIdx};f.share.CustomComboBox.prototype.setSelectedIdx=function(g){if(g>=0&&g<this.items.length){this.selectedIdx=g}return this.selectedIdx};(function a(){var g=f.share.comboBoxDefaultCSS("");f.Util.css.addDefaultCSS(g,"CustomComboBox")})()}if(!f.share.SocialDialog){f.share.SocialDialog=function SocialDialog(g,l,j,i,h,k){f.Logger.log(f.Logger.CONFIG,"s7sdk.share.SocialDialog constructor - containerId: %0, settings: %1 , compId: %2",g,l,j);if(h){this.symbols=h}var m=!!arguments[5];arguments.callee.superclass.apply(this,[j,g,"div",i,l,!m]);this.cl=i;this.compId=(f.Util.isNull(j)?"":j);this.defaultContainerId=this.getAnchorId(document.getElementById(g));this.parent=k;this.focusableElements=[];this.firstFocusableElement=null;this.lastFocusableElement=null};f.Class.inherits("s7sdk.share.SocialDialog","s7sdk.UIComponent");f.share.SocialDialog.prototype.symbols={HEADER:"",TOOLTIP_HEADER_CLOSE:"",CANCEL:"Cancel",TOOLTIP_CANCEL:"Cancel",TOOLTIP_SCROLL_UP:"Scroll up",TOOLTIP_SCROLL_DOWN:"Scroll down",ACTION:"",TOOLTIP_ACTION:""};f.share.SocialDialog.prototype.getAnchorId=function(h){var g=h;while(g!=null){g=g.parentNode;if(g==document.body){break}if(g!=null&&typeof(g.s7base)=="object"&&f.common&&f.common.Container&&(g.s7base instanceof f.common.Container)){break}}return g==document.body||typeof(g.id)=="undefined"?null:g.id};f.share.SocialDialog.prototype.attachDialog=function(){var k=document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.webkitCurrentFullScreenElement;var m;this.isBody=false;if(k){m=k}else{if((this.defaultContainerId!=null)&&(f.Util.byId(this.defaultContainerId))){m=f.Util.byId(this.defaultContainerId);if(m instanceof f.Container){m=m.firstChild}}else{m=document.body;this.isBody=true}}if(this.container!=m){this.container=m;m.appendChild(this.obj)}if(this.isTouch&&this.contentInt&&!this.scrollingContent){this.scrollingContent=this.contentInt;var h=0;var i=this.scrollingContent;var g=0;var j=this;this.scrollingContentTouchstartHandler=function(o){h=o.touches[0].pageY;g=event.touches.length;if(g>1){f.Event.preventDefault(o);f.Event.stopPropagation(o);return}var n=i.scrollTop;if(n+i.offsetHeight>=i.scrollHeight){i.scrollTop=i.scrollHeight-i.offsetHeight-1}};f.Event.addDOMListener(this.scrollingContent,"touchstart",this.scrollingContentTouchstartHandler,{passive:false});this.touchmoveHandler=function(n){f.Event.preventDefault(n);f.Event.stopPropagation(n)};f.Event.addDOMListener(this.obj,"touchmove",this.touchmoveHandler,{passive:false});this.scrollingContentTouchmoveHandler=function(n){f.Event.stopPropagation(n);if(((h-n.touches[0].pageY)<0)&&(i.scrollTop==0)){f.Event.preventDefault(n)}if(j.contentInt.clientHeight>=j.contentSpan.offsetHeight){f.Event.preventDefault(n)}};f.Event.addDOMListener(this.scrollingContent,"touchmove",this.scrollingContentTouchmoveHandler,{passive:false});this.scrollingContentTouchendHandler=function(n){g=0};f.Event.addDOMListener(this.scrollingContent,"touchend",this.scrollingContentTouchendHandler,{passive:false})}if(this.isTouch){if(this.contentInt){this.contentSpan.focus()}var l=this.getMaxNeighbourZIndex(this.obj)+1;this.obj.style.zIndex=l}};f.share.SocialDialog.prototype.getMaxNeighbourZIndex=function(l){var k=-1;for(var h=0;h<l.parentNode.children.length;h++){var g=l.parentNode.children[h];var j=this.getZIndex(g);if(this.isPositioned(g)&&(j>0)){j=this.getZIndex(g)}else{if(g.children.length>0){j=this.getMaxNeighbourZIndex(g.children[0])}else{j=0}}if(j>k){k=j}}return k};f.share.SocialDialog.prototype.getZIndex=function(h){var g;if(window.getComputedStyle){g=document.defaultView.getComputedStyle(h,null).getPropertyValue("z-index")}else{if(h.currentStyle){g=h.currentStyle.zIndex}}if(g=="auto"){g=0}return parseInt(g)};f.share.SocialDialog.prototype.isPositioned=function(h){var g;if(window.getComputedStyle){g=document.defaultView.getComputedStyle(h,null).getPropertyValue("position")}else{if(h.currentStyle){g=h.currentStyle.position}}return(g=="absolute")||(g=="relative")||(g=="fixed")};f.share.SocialDialog.prototype.createDialog=function(h){this.createElement();this.obj.style.position="absolute";this.obj.style.width="100%";this.obj.style.height="100%";this.top=this.left=0;this.attachDialog();this.backOverlay=document.createElement("div");this.backOverlay.className="s7backoverlay";this.obj.appendChild(this.backOverlay);this.dialog=document.createElement("div");this.dialog.className="s7dialog";this.dialog.setAttribute("tabindex",-1);this.dialog.setAttribute("role","dialog");this.dialog.setAttribute("aria-hidden","true");this.obj.appendChild(this.dialog);var j=f.Util.getStyle(this.dialog,"width");this.dialog.style.width="100%";var i=f.Util.getStyle(this.dialog,"width");this.isTouch=j==i;this.dialog.style.width="";var l=document.createElement("div");l.style.top="0px";l.style.left="0px";l.style.position="absolute";l.style.zIndex=9999;this.dialog.appendChild(l);var g=document.createElement("span");g.style.position="relative";l.appendChild(g);this.cntSpAbsolute=g;this.cntSpAbsolute.dlgAbsolute=l;this.createCaption();this.createContentContainer();this.createContent();this.createBottom(h);this.dialogStyle=this.dialog.style.height;this.contentIntStyle=this.contentInt.style.height;this.setupSz();this.centerDialog();this.wid_=parseInt(f.Util.getStyle(this.obj,"width"));this.hei_=parseInt(f.Util.getStyle(this.obj,"height"));this.obj.style.display="none";if(this.isTouch){var k=this;this.onOrientationChange=function(n){if(!k.isTouch){return}k.blockresize=true;k.focusableElements=k.getFocusableElements();for(var m=0;m<k.focusableElements.length;m++){if(k.focusableElements[m]==document.activeElement){k.focusableElements[m].blur();break}}k.blockresize=false;k.hide();k.waitToHide=-1;k.show();k.waitToHide=-1}}};f.share.SocialDialog.prototype.getContainerHeight=function(){return this.backOverlay.offsetHeight};f.share.SocialDialog.prototype.createContentContainer=function(){this.contentInt=document.createElement("div");this.contentInt.setAttribute("id",this.compId+"_viewArea");this.contentInt.setAttribute("tabindex","0");this.contentInt.className="s7dialogviewarea";this.dialog.appendChild(this.contentInt);this.contentSpan=document.createElement("span");this.contentSpan.className="s7dialogbody";this.contentInt.appendChild(this.contentSpan);var g=window.matchMedia("(max-width: 700px)");function h(l){var k=document.querySelectorAll(".s7dialogviewarea");if(l.matches){for(var j=0;j<k.length;j++){k[j].classList.add("s7dialogviewareashort")}}else{for(var j=0;j<k.length;j++){k[j].classList.remove("s7dialogviewareashort")}}}h(g);g.addListener(h)};f.share.SocialDialog.prototype.centerDialog=function(g){if(this.isBody){if(this.isTouch){this.dialog.style.left=this.left+(this.obj.offsetWidth-this.dialog.offsetWidth)/2+"px";this.dialog.style.top=this.top+(this.obj.offsetHeight-this.dialog.offsetHeight)/2+"px"}else{if(this.obj.offsetWidth!=this.dialog.offsetWidth||g){this.dialog.style.left=this.left+(this.obj.offsetWidth-this.dialog.offsetWidth)/2+"px";this.dialog.style.top=this.top+(this.obj.offsetHeight-this.dialog.offsetHeight)/2+"px"}}}else{if(this.isTouch){this.moveToTopLeft(this.dialog)}else{this.dialog.style.left=(this.backOverlay.offsetWidth-this.dialog.offsetWidth)/2+"px";this.dialog.style.top=(this.backOverlay.offsetHeight-this.dialog.offsetHeight)/2+"px"}}};f.share.SocialDialog.prototype.moveToTopLeft=function(i){f.Util.css.setCSSAttributeSelector(i,"mode","fullscreen");var h=parseInt(f.Util.getStyle(i,"left"));var l=parseInt(f.Util.getStyle(i,"top"));h=f.Util.isNumber(h)?h:-parseInt(f.Util.getStyle(i,"right"));l=f.Util.isNumber(l)?l:-parseInt(f.Util.getStyle(i,"bottom"));h=f.Util.isNumber(h)?h:0;l=f.Util.isNumber(l)?l:0;var j=i.getBoundingClientRect();var g=j.left-h;var k=j.top-l;i.style.left=-g+"px";i.style.top=-k+"px"};f.share.SocialDialog.prototype.getInitialHeight=function(){return parseInt(f.Util.css.getCss("s7dialogviewarea","height",this.contentInt.id,null,this.dialog))};f.share.SocialDialog.prototype.setupSz=function(){if(this.obj.style.display=="none"){return}this.contentSpan.style.top="0px";this.dialog.style.height="";this.contentInt.style.height="";var h=this.getInitialHeight();var j;if(!this.isTouch){j=this.dialog.offsetHeight-this.backOverlay.offsetHeight;if(j>0){this.contentInt.style.height=h+"px";j=this.dialog.offsetHeight-this.backOverlay.offsetHeight;if(h-j>=0){this.contentInt.style.height=(h-j)+"px"}}}else{var g=f.Util.getObjPos(this.bottom).y-f.Util.getObjPos(this.contentInt).y;this.contentInt.style.height=g+"px";var i=(this.contentInt.offsetWidth-this.contentSpan.offsetWidth)/2;this.contentSpan.style.left=i+"px"}j=(this.contentInt.offsetHeight-this.contentSpan.offsetHeight)/2;if(j>0){this.contentSpan.style.top=j+"px"}};f.share.SocialDialog.prototype.setupScroll=function(){var h=this.contentSpan.offsetHeight-this.contentInt.clientHeight;if(h>0){var g=this.scrollbarInst.curPos_;this.scrollbarInst.setMaxScroll(h);this.scrollbarInst.curPos_=g;this.scrollbarInst.setThumbPosition(false);this.contentSb.style.display="inline-block"}else{this.contentSb.style.display="none"}if(this.scrollbarInst){this.scrollbarInst.setScrollStep(Math.round(this.contentInt.clientHeight*0.1))}};f.share.SocialDialog.prototype.createCaption=function(k){this.caption=document.createElement("div");this.caption.id=this.compId+"_header";this.caption.className="s7dialogheader";this.dialog.appendChild(this.caption);this.dialog.setAttribute("aria-labelledby",this.caption.id);var j=document.createElement("span");j.className="s7dialogline";this.caption.appendChild(j);var g=document.createElement("span");g.className="s7dialogheadericon";j.appendChild(g);var i=document.createElement("span");i.className="s7dialogheadertext";i.innerText=this.getLocalizedText("HEADER");j.appendChild(i);this.closebutton=new f.share.DlgActionButton(this.caption.id,this.settings,null,{TOOLTIP:this.getLocalizedText("TOOLTIP_HEADER_CLOSE")},"s7closebutton");this.closebutton.obj.ariaLabel=this.getLocalizedText("CLOSE");var h=this;f.Event.addDOMListener(this.closebutton,"click",function(l){h.closebutton.obj.blur();h.onClose(l)},true)};f.share.SocialDialog.prototype.createBottom=function(h){this.bottom=document.createElement("div");this.bottom.className="s7dialogfooter";this.dialog.appendChild(this.bottom);var g=document.createElement("div");this.bottom.appendChild(g);var j=document.createElement("span");j.className="s7dialogbuttoncontainer";j.id=this.compId+"_footerPanel";g.appendChild(j);this.lnc_tnr=g;this.cancelbutton=new f.share.DlgActionButton(j.id,this.settings,null,{TOOLTIP:this.getLocalizedText("TOOLTIP_CANCEL")},"s7dialogcancelbutton","span",this.getLocalizedText("CANCEL"));this.bottom.buttonsCtnrId=j.id;var i=this;if(!h){this.actionbutton=new f.share.DlgActionButton(j.id,this.settings,null,{TOOLTIP:this.getLocalizedText("TOOLTIP_ACTION")},"s7dialogactionbutton","span",this.getLocalizedText("ACTION"));f.Event.addDOMListener(this.actionbutton,"click",function(k){i.onAction(k)},true)}f.Event.addDOMListener(this.cancelbutton,"click",function(k){i.onCancel(k)},true);if(this.isTouch){this.bottom.style.position="absolute";this.bottom.style.width="100%"}};f.share.SocialDialog.prototype.onAction=function(g){};f.share.SocialDialog.prototype.onCancel=function(g){};f.share.SocialDialog.prototype.createScrollbar=function(){this.contentSb=document.createElement("div");this.contentSb.id=this.id+"_scrollBarContainer";this.contentSb.className="s7dialogscrollpanel";this.contentInt.appendChild(this.contentSb);var g=this;this.scrollbarInst=new f.ScrollBar(this.contentSb.id,this.settings,this.contentSb.id+"_scrollBar");this.scrollbarInst.upButton_.toolTip_.setContent(this.getLocalizedText("TOOLTIP_SCROLL_UP"));this.scrollbarInst.downButton_.toolTip_.setContent(this.getLocalizedText("TOOLTIP_SCROLL_DOWN"));this.scrollbarInst.upButton_.obj.setAttribute("tabindex",-1);this.scrollbarInst.downButton_.obj.setAttribute("tabindex",-1);this.scrollbarInst.addEventListener(f.ScrollEvent.SCROLL_POSITION_EVENT,function(h){g.moveContent(h.s7event.position)},false);if(!this.isTouch){this.contentInt.addEventListener("scroll",function(h){document.getElementById(g.contentSb.id).style.top=g.contentInt.scrollTop+"px";g.scrollbarInst.upButton_.obj.setAttribute("tabindex",-1);g.scrollbarInst.downButton_.obj.setAttribute("tabindex",-1)},false)}if(this.isTouch){this.scrollbarInst.obj.style.display="none"}};f.share.SocialDialog.prototype.moveContent=function(g){this.contentInt.scrollTop=g;if(this.onPositionChanged){this.onPositionChanged()}};f.share.SocialDialog.prototype.createLineFeed=function(){var g=document.createElement("span");g.className="s7dialoglinefeed";this.contentSpan.appendChild(g)};f.share.SocialDialog.prototype.onClose=function(){this.hide()};f.share.SocialDialog.prototype.getFocusableElements=function(){var k=[];function l(i,n,o){var m=i[n];i.splice(n,1);i.splice(o,0,m)}var h=this.dialog.querySelectorAll("[aria-invalid=true],a[href], area[href], input:not([disabled]), select:not([disabled]),[tabindex]:not([notfocusable='true'])");var j=Array.prototype.slice.call(h);for(var g=0;g<j.length;g++){if(j[g].getAttribute("tabindex")!="-1"&&(f.Util.getStyle(j[g],"visibility")!="hidden")&&((f.Util.getStyle(j[g],"display")!="none")&&(f.Util.getStyle(j[g].parentNode,"display")!="none"))){k.push(j[g])}}for(var g=0;g<k.length;g++){if(k[g].getAttribute("aria-invalid")=="true"){l(k,g,0);break}}return k};f.share.SocialDialog.prototype.show=function(){if(this.obj.style.display=="block"){return}this.attachDialog();if(!this.isBody){this.container.style.overflow="visible";this.left=undefined;this.top=undefined}this.obj.style.left=0+"px";this.obj.style.top=0+"px";this.contentSpan.style.top="0px";var g=this;this.resizeTimer=setInterval(function(){if(!g.blockresize){g.onCheckResize()}},100);this.obj.style.visibility="hidden";this.obj.style.display="block";this.setupSz();this.centerDialog(true);this.obj.style.visibility="";if(("onorientationchange" in window)&&f.browser.device!=""){window.addEventListener("orientationchange",this.onOrientationChange)}this.focusableElements=this.getFocusableElements();this.firstFocusableElement=this.focusableElements[0];this.lastFocusableElement=this.focusableElements[this.focusableElements.length-1];var h=document;this.focusHandler=function(i){if(g.dialogShow&&!g.dialog.contains(i.target)){f.Event.stopPropagation(i);g.firstFocusableElement.focus()}};this.keyHandler=function(i){if(g.dialogShow&&i.keyCode==f.Enum.KEY_CODE.TAB){g.focusableElements=g.getFocusableElements();g.firstFocusableElement=g.focusableElements[0];g.lastFocusableElement=g.focusableElements[g.focusableElements.length-1];if(g.focusableElements.length!=1){if(i.shiftKey){if(document.activeElement===g.firstFocusableElement){f.Event.preventDefault(i);g.lastFocusableElement.focus()}}else{if(document.activeElement===g.lastFocusableElement){f.Event.preventDefault(i);g.firstFocusableElement.focus()}}}}if(g.dialogShow&&i.keyCode==f.Enum.KEY_CODE.ESCAPE){g.hide()}if(g.dialogShow&&i.target.tagName!="INPUT"&&i.target.tagName!="TEXTAREA"&&i.target.tagName!="SELECT"&&i.target.className!="s7combobox"){var j=-1;if(i.keyCode==f.Enum.KEY_CODE.UP){j=g.contentInt.scrollTop-parseInt((g.contentInt.scrollHeight-g.contentInt.clientHeight)/10);if(j<0){j=0}}if(i.keyCode==f.Enum.KEY_CODE.DOWN){j=g.contentInt.scrollTop+parseInt((g.contentInt.scrollHeight-g.contentInt.clientHeight)/10)}if(i.keyCode==f.Enum.KEY_CODE.PAGE_UP){j=g.contentInt.scrollTop-parseInt((g.contentInt.scrollHeight-g.contentInt.clientHeight)/2);if(j<0){j=0}}if(i.keyCode==f.Enum.KEY_CODE.PAGE_DOWN){j=g.contentInt.scrollTop+parseInt((g.contentInt.scrollHeight-g.contentInt.clientHeight)/2)}if(i.keyCode==f.Enum.KEY_CODE.HOME){j=0}if(i.keyCode==f.Enum.KEY_CODE.END){j=g.contentInt.scrollTop+parseInt((g.contentInt.scrollHeight-g.contentInt.clientHeight))}if(j!=-1&&g.scrollbarInst){g.scrollbarInst.setPosition(j);g.scrollbarInst.dispatchEvent(new f.ScrollEvent(f.ScrollEvent.SCROLL_POSITION_EVENT,j,true));f.Event.preventDefault(i)}}};f.Event.addDOMListener(h,"focus",this.focusHandler,true);f.Event.addDOMListener(h,"keydown",this.keyHandler,{passive:false});this.lastFocus=document.activeElement;this.dialog.setAttribute("tabindex",0);this.dialog.setAttribute("aria-hidden","false");this.dialogShow=true;this.firstFocusableElement.focus();g.onCheckResize()};f.share.SocialDialog.prototype.onCheckResizeBody=function(){var m=document.documentElement;var l=(window.pageXOffset||m.scrollLeft)-(m.clientLeft||0);var k=(window.pageYOffset||m.scrollTop)-(m.clientTop||0);var i=false;if(this.left!=l||this.top!=k){this.left=l;this.top=k;this.backOverlay.style.left=l+"px";this.backOverlay.style.top=k+"px";i=true}if(this.isTouch){this.screensize=f.browser.detectScreen();this.obj.style.width=this.screensize.w+"px";this.obj.style.height=this.screensize.h+"px"}var g=this.backOverlay.offsetWidth;var j=this.backOverlay.offsetHeight;if(this.wid_!=g||this.hei_!=j){this.attachDialog();this.wid_=g;this.hei_=j;this.setupSz();if(!this.isTouch&&this.scrollbarInst){this.scrollbarInst.resize()}this.centerDialog()}else{if(i){this.centerDialog(true)}}};f.share.SocialDialog.prototype.onCheckResize=function(){if(this.isBody){this.onCheckResizeBody();return}var j=document.documentElement;var i=(window.pageXOffset||j.scrollLeft)-(j.clientLeft||0);var h=(window.pageYOffset||j.scrollTop)-(j.clientTop||0);var g=f.browser.detectScreen();if(this.left!=i||this.top!=h||this.wid_!=g.w||this.hei_!=g.h){this.obj.style.width=(g.w>j.clientWidth?j.clientWidth:g.w)+"px";this.obj.style.height=g.h+"px";this.moveToTopLeft(this.obj);this.attachDialog();this.left=i;this.top=h;this.wid_=g.w;this.hei_=g.h;this.setupSz();if(!this.isTouch&&this.scrollbarInst){this.scrollbarInst.resize()}this.centerDialog()}};f.share.SocialDialog.prototype.hide=function(){if(("onorientationchange" in window)&&f.browser.device!=""){window.removeEventListener("orientationchange",this.onOrientationChange)}var h=document;f.Event.removeDOMListener(h,"focus",this.focusHandler,true);f.Event.removeDOMListener(h,"keydown",this.keyHandler,{passive:false});if(this.resizeTimer){window.clearInterval(this.resizeTimer);var g=new f.event.SocialEvent(f.event.SocialEvent.NOTF_SOCIAL_DEACTIVATED,true);this.parent.dispatchEvent(g)}this.resizeTimer=null;if(!this.isBody){this.container.style.overflow="";this.wid_=-1;this.onCheckResize()}this.obj.style.display="none";this.dialog.setAttribute("tabindex",-1);this.dialog.setAttribute("aria-hidden","true");this.dialogShow=false;this.lastFocus.focus()};f.share.SocialDialog.prototype.dispose=function(){if(this.obj){if(this.obj.parentElement){this.obj.parentElement.removeChild(this.obj)}}};(function a(){var h=f.Util.css.createCssRuleText;var g=h(".s7dialogcancelbutton",{"width":"64px","height":"34px"})+h(".s7dialogcancelbutton[state='up']",{"background-color":"#666666","color":"#e4e4e4"})+h(".s7dialogcancelbutton[state='down']",{"background-color":"#555555","color":"#ffffff"})+h(".s7dialogcancelbutton[state='over']",{"background-color":"#555555","color":"#ffffff"})+h(".s7dialogcancelbutton[state='disabled']",{"background-color":"#b2b2b2","color":"#e4e4e4"});f.Util.css.addDefaultCSS(g,"SocialDialog")})()}if(!f.share.LinkDialogControl){f.share.LinkDialogControl=function(g){arguments.callee.superclass.apply(this,[g,f.share.LinkDialogControl.NS,g.constructor,f.share.LinkDialog.RESTRICTED_STYLES])};f.share.LinkDialogControl.prototype.setCSS=function(k,j,i){if(this.component){function h(l){return l.replace(/\./g,"").split(" ")}var g=h(k);if(g[0]==this.component.cl){this.superclass.prototype.setCSS.apply(this,[k,j,i])}}};f.share.LinkDialogControl.NS="s7sdk.share.LinkDialogControl"}f.Class.inherits(f.share.LinkDialogControl.NS,"s7sdk.ControlComponent");if(!f.share.LinkDialog){f.share.LinkDialog=function LinkDialog(g,k,i,h,j){f.Logger.log(f.Logger.CONFIG,"s7sdk.share.LinkDialog constructor - containerId: %0, settings: %1 , compId: %2",g,k,i);var l=!!arguments[5];arguments.callee.superclass.apply(this,[g,k,i,"s7linkdialog",h,j,!l]);this.createDialog(f.browser.device.name!="desktop");if(!l){return new f.share.LinkDialogControl(this)}else{return this}};f.Class.inherits("s7sdk.share.LinkDialog","s7sdk.share.SocialDialog");f.share.LinkDialog.prototype.symbols={HEADER:"Share Link",DESCRIPTION:"To share this content with others, copy and past this link:",ACTION:"Select All",TOOLTIP_ACTION:"Select All",CANCEL:"Cancel",TOOLTIP_CANCEL:"Cancel"};f.share.LinkDialog.prototype.createContent=function(){this.createLinkLable(this.getLocalizedText("DESCRIPTION"));this.createLinkLine();var h=window.matchMedia("(max-width: 700px)");function g(j){var i=document.querySelector(".s7dialoglink");if(j.matches){i.classList.add("s7dialoginputwidereduced")}else{i.classList.remove("s7dialoginputwidereduced")}}g(h);h.addListener(g)};var b="sharelinklabel_"+Math.floor(Math.random()*1000)+1;f.share.LinkDialog.prototype.createLinkLable=function(g){var h=document.createElement("span");h.className="s7dialogline s7dialoglabel s7dialoginputwide";h.setAttribute("id",b);this.contentSpan.appendChild(h);h.innerText=g;this.createLineFeed()};f.share.LinkDialog.prototype.createLinkLine=function(){var g=document.createElement("span");g.className="s7dialogline s7dialoginputcontainer";this.contentSpan.appendChild(g);this.inplnk=document.createElement("input");this.inplnk.className="s7dialoglink";this.inplnk.setAttribute("aria-labelledby",b);this.inplnk.setAttribute("readonly","");this.inplnk.setAttribute("aria-readonly","true");g.appendChild(this.inplnk);this.createLineFeed()};f.share.LinkDialog.prototype.setupScroll=function(){};f.share.LinkDialog.prototype.createScrollbar=function(){};f.share.LinkDialog.prototype.onAction=function(){if(this.inplnk.select){this.inplnk.focus();this.inplnk.select();this.firstFocusableElement=this.inplnk;return}var g,h;if(window.getSelection&&document.createRange){h=window.getSelection();g=document.createRange();g.selectNodeContents(this.inplnk);h.removeAllRanges();h.addRange(g)}else{if(document.selection&&document.body.createTextRange){g=document.body.createTextRange();g.moveToElementText(this.inplnk);g.select()}else{}}};f.share.LinkDialog.prototype.onCancel=function(){try{window.getSelection().removeAllRanges()}catch(g){document.selection.empty()}this.hide()};f.share.LinkDialog.prototype.setContentUrl=function(g){if(g){this.inplnk.value=g}};f.share.LinkDialog.prototype.show=function(){f.share.SocialDialog.prototype.show.call(this);this.dialog.setAttribute("tabindex",-1)};(function a(){var j=f.Util.css.createCssRuleText;var h=f.Util.css.createCssImgUrlText;var g=j(".s7linkdialog .s7dialogheadericon",{"background-image":h("dlglink_cap.png"),"width":"22px","height":"12px"})+j(".s7linkdialog .s7dialogviewarea",{"height":"100px"})+j(".s7linkdialog .s7dialogviewarea.s7dialogviewareashort",{"width":"315px"})+j(".s7linkdialog .s7dialogbody .s7dialoginputwidereduced",{"width":"200px"})+j(".s7linkdialog .s7dialoginputwide",{"border":"none","padding-bottom":"10px","width":"430px"})+j(".s7linkdialog .s7dialoginputcontainer",{"border":"1px solid #cccccc","padding":"9px"})+j(".s7linkdialog .s7dialoglink",{"border":"none","width":"450px"})+j(".s7linkdialog .s7dialogcancelbutton",{"width":"64px","height":"34px"})+j(".s7linkdialog .s7dialogcancelbutton[state='up']",{"background-color":"#666666","color":"#e4e4e4"})+j(".s7linkdialog .s7dialogcancelbutton[state='down']",{"background-color":"#555555","color":"#ffffff"})+j(".s7linkdialog .s7dialogcancelbutton[state='over']",{"background-color":"#555555","color":"#ffffff"})+j(".s7linkdialog .s7dialogcancelbutton[state='disabled']",{"background-color":"#b2b2b2","color":"#e4e4e4"})+j(".s7linkdialog .s7dialogactionbutton",{"width":"82px","height":"34px"})+j(".s7linkdialog .s7dialogactionbutton[state='up']",{"background-color":"#333333","color":"#dddddd"})+j(".s7linkdialog .s7dialogactionbutton[state='down']",{"background-color":"#222222","color":"#cccccc"})+j(".s7linkdialog .s7dialogactionbutton[state='over']",{"background-color":"#222222","color":"#cccccc"})+j(".s7linkdialog .s7dialogactionbutton[state='disabled']",{"background-color":"#b2b2b2","color":"#dddddd"});var i=[];f.share.dialogsDefaultCSS("LinkDialog",".s7linkdialog",i,g)})()}if(!f.share.EmailDialogControl){f.share.EmailDialogControl=function(g){arguments.callee.superclass.apply(this,[g,f.share.EmailDialogControl.NS,g.constructor,f.share.EmailDialog.RESTRICTED_STYLES])};f.share.EmailDialogControl.prototype.setCSS=function(k,j,i){if(this.component){function h(l){return l.replace(/\./g,"").split(" ")}var g=h(k);if(g[0]==this.component.cl){this.superclass.prototype.setCSS.apply(this,[k,j,i])}}};f.share.EmailDialogControl.NS="s7sdk.share.EmailDialogControl"}f.Class.inherits(f.share.EmailDialogControl.NS,"s7sdk.ControlComponent");if(!f.share.EmailDialog){f.share.EmailDialog=function EmailDialog(g,k,i,h,j){f.Logger.log(f.Logger.CONFIG,"s7sdk.share.EmailDialog_src constructor - containerId: %0, settings: %1 , compId: %2",g,k,i);var l=!!arguments[5];arguments.callee.superclass.apply(this,[g,k,i,"s7emaildialog",h,j,!l]);this.createDialog();if(!l){return new f.share.EmailDialogControl(this)}else{return this}};f.Class.inherits("s7sdk.share.EmailDialog","s7sdk.share.SocialDialog");f.share.EmailDialog.prototype.symbols={HEADER:"Email this to a Friend",INVALID_ADDRESSS:"Wrong email address",TO_EMAIL_ERROR:"To email address is required or it may be invalid",FROM_EMAIL_ERROR:"From email address is required or it may be invalid",TO:"To",TOOLTIP_ADD:"Add",ADD:"Add Another Email Address",PRIMARY_EMAIL_ADDRESS:"Primary Email Address",ADDITIONAL_EMAIL_ADDRESS:"Additional Email Address",FROM:"From",MESSAGE:"Message",TOOLTIP_REMOVE:"Remove",REMOVE:"Remove the email address",CANCEL:"Cancel",TOOLTIP_CANCEL:"Cancel",CLOSE:"Close",TOOLTIP_CLOSE:"Close",TOOLTIP_SCROLL_UP:"Scroll up",TOOLTIP_SCROLL_DOWN:"Scroll down",ACTION:"Send Email",TOOLTIP_ACTION:"Send Email",SEND_SUCCESS:"Email sent successfully",SEND_FAILURE:"Send email failed"};f.share.EmailDialog.prototype.createContent=function(){f.Util.css.setCSSAttributeSelector(this.contentInt,"state","");this.addrCounter=0;this.createMailLine("$TOEMAIL$",this.getLocalizedText("PRIMARY_EMAIL_ADDRESS")+"*","input",false,null,"s7dialoginputshort");this.createAddMailLine();this.createMailLine("$FROMEMAIL$",this.getLocalizedText("FROM")+"*","input",false,null,"s7dialoginputwide");this.msgCtrl=this.createMailLine("$MESSAGEEMAIL$",this.getLocalizedText("MESSAGE"),"textarea",false,null,"s7dialoginputwide");this.createDescrLine();var i=this.contentSpan.querySelector(".s7dialogline .s7dialoginputcontainer .s7dialoginputshort");i.parentElement.setAttribute("data-children-count","1");i.setAttribute("aria-labelledby",i.getAttribute("aria-labelledby")+" "+i.id);this.createErrorMsg();var h=window.matchMedia("(max-width: 700px)");function g(k){var l=document.querySelectorAll(".s7dialoginputshort");var m=document.querySelectorAll(".s7dialoginputwide");if(k.matches){for(var j=0;j<l.length;j++){l[j].classList.add("s7dialoginputshortreduced")}for(var j=0;j<m.length;j++){m[j].classList.add("s7dialoginputwidereduced")}}else{for(var j=0;j<l.length;j++){l[j].classList.remove("s7dialoginputshortreduced")}for(var j=0;j<m.length;j++){m[j].classList.remove("s7dialoginputwidereduced")}}}g(h);h.addListener(g)};f.share.EmailDialog.prototype.getInitialHeight=function(){var g=this.contentInt.getAttribute("state");return parseInt(f.Util.css.getCss("s7dialogviewarea","height",this.contentInt.id,null,this.dialog,{"state":g}))};f.share.EmailDialog.prototype.createErrorMsg=function(){var j=document.createElement("span");j.className="s7dialogline s7dialogerror";f.Util.css.setCSSAttributeSelector(j,"error","false");var g=document.createElement("span");g.className="s7dialogerrormessage";j.appendChild(g);j.errsp=g;j.errList=[];j.setAttribute("role","alert");j.setAttribute("aria-hidden",true);var i=this.contentSpan.getElementsByClassName("s7dialogline")[0];var h=this.contentSpan.getElementsByClassName("s7dialogline")[2];i.classList.add("s7dialoglineto");h.classList.add("s7dialoglinefrom");this.toEmailError=j;this.fromEmailError=j.cloneNode(true);this.fromEmailError.errsp=this.fromEmailError.querySelector(".s7dialogerrormessage");this.fromEmailError.errList=[];this.toEmailError.id=this.id+"_dialogerrorto";this.fromEmailError.id=this.id+"_dialogerrorfrom";this.contentSpan.insertBefore(this.toEmailError,i);this.contentSpan.insertBefore(this.fromEmailError,h);this.setErrorMsg("INVALID_ADDRESSS","verifyerror",this.toEmailError);this.setErrorMsg("INVALID_ADDRESSS","verifyerror",this.fromEmailError);this.createLineFeed()};f.share.EmailDialog.prototype.setErrorMsg=function(j,i,k){this.errLine=k;var h=k.errsp;f.Util.css.setCSSAttributeSelector(h,"state",i);var g=this.getLocalizedText(j);h.textContent=g;h.innerText=g};f.share.EmailDialog.prototype.createAddMailLine=function(){var j=document.createElement("span");j.id=this.id+"_lnctnr_"+f.Util.createUniqueId();j.className="s7dialogline";this.contentSpan.appendChild(j);var i=document.createElement("span");i.className="s7dialoglabel s7dialoginputlabel";this.addBtnCtnr=j;var h=new f.share.DlgActionButton(j.id,this.settings,null,{TOOLTIP:this.getLocalizedText("TOOLTIP_ADD")},"s7dialogaddemailbutton","span",this.getLocalizedText("ADD"));h.obj.setAttribute("aria-label",this.getLocalizedText("ADD"));var g=this;h.addEventListener("click",function(){g.onAddEmailAddress()},false);this.createLineFeed()};f.share.EmailDialog.prototype.onAddEmailAddress=function(){var i=document.createElement("span");i.className="s7dialoglinefeed";this.addrCounter++;var l=this.createMailLine("$ADDEMAIL"+this.addrCounter+"$",this.getLocalizedText("ADDITIONAL_EMAIL_ADDRESS")+" "+this.addrCounter,"input",true,this.addBtnCtnr,"s7dialoginputshort");l.classList.add("s7dialoglineto");if(this.contentSpan.querySelectorAll(".s7dialogremoveemailbutton").length==1){var g=document.createElement("span");g.id=this.id+"_lbl_"+f.Util.createUniqueId();g.className="s7dialoglabel s7dialoginputlabel s7dialogadditionalemaillabel";g.innerText=this.getLocalizedText("ADDITIONAL_EMAIL_ADDRESSES");var j=this.contentSpan.querySelector(".s7dialogremoveemailbutton").parentElement.parentElement;j.insertBefore(g,this.contentSpan.querySelector(".s7dialogremoveemailbutton").parentElement)}var m=l.querySelector(".s7dialoglabel.s7dialoginputlabel");m.style="display: none";var h=l.querySelector(".s7dialoginputcontainer .s7dialoginputshort");h.parentElement.setAttribute("data-children-count","1");var k=l.querySelector(".s7button.s7dialogremoveemailbutton");k.setAttribute("aria-label",k.getAttribute("aria-label")+" "+h.getAttribute("aria-label"));this.contentSpan.insertBefore(i,this.addBtnCtnr);l.inp.focus();this.wid_=0};f.share.EmailDialog.prototype.createDescrLine=function(){var k=document.createElement("span");k.className="s7dialogline s7dialogcontent";this.contentSpan.appendChild(k);var j=document.createElement("span");j.className="s7dialogthumbnail";k.appendChild(j);var i=parseInt(f.Util.getStyle(j,"width"));var n=parseInt(f.Util.getStyle(j,"height"));k.imgsp=j;k.imgsp.w=i==0?j.clientWidth:i;k.imgsp.h=n==0?j.scrollHeight:n;var g=document.createElement("span");g.className="s7dialoginfopanel";k.appendChild(g);var m=document.createElement("span");m.className="s7dialogtitle";g.appendChild(m);k.titlestr=m;var h=document.createElement("span");h.className="s7dialogorigin";g.appendChild(h);k.site=h;var l=document.createElement("span");l.className="s7dialogdescription";g.appendChild(l);k.descrtext=l;this.descr=k};f.share.EmailDialog.prototype.createMailLine=function(i,n,o,j,m,p){var l=document.createElement("span");if(j){l.id=this.id+"_lnctnr_"+f.Util.createUniqueId()}l.className="s7dialogline";if(m){this.contentSpan.insertBefore(l,m)}else{this.contentSpan.appendChild(l)}var k=document.createElement("span");k.id=this.id+"_lbl_"+f.Util.createUniqueId();k.className="s7dialoglabel s7dialoginputlabel";k.innerText=n;l.appendChild(k);var h=document.createElement("span");h.className="s7dialoginputcontainer";l.appendChild(h);l.spinp=h;l.inp=document.createElement(o);l.inp.setAttribute("aria-labelledby",k.id);l.inp.id=this.id+"_"+o+"_"+f.Util.createUniqueId();if(o=="textarea"){l.inp.className="s7dialogmessage "+p;l.inp.setAttribute("aria-multiline","true")}else{l.inp.className=p;l.inp.setAttribute("aria-multiline","false");l.inp.setAttribute("aria-required",true);l.inp.setAttribute("aria-invalid",false);var g=this;l.inp.onchange=function(r){var q=g.verifyEmailAddress(l)}}h.appendChild(l.inp);if(j){l.btn=new f.share.DlgActionButton(l.id,this.settings,null,{TOOLTIP:this.getLocalizedText("TOOLTIP_REMOVE")},"s7dialogremoveemailbutton");l.btn.obj.setAttribute("aria-label",this.getLocalizedText("TOOLTIP_REMOVE"));if(m){var g=this;f.Event.addDOMListener(l.btn,"click",function(s){var r=-1;g.focusableElements=g.getFocusableElements();for(var q=0;q<g.focusableElements.length;q++){if(g.focusableElements[q]==document.activeElement){r=q;break}}g.onRemove(l);if(r<(g.focusableElements.length-1)){g.focusableElements[r+1].focus()}else{g.firstFocusableElement.focus()}g.focusableElements=g.getFocusableElements();g.firstFocusableElement=g.focusableElements[0];g.lastFocusableElement=g.focusableElements[g.focusableElements.length-1];g.updateEmailInputFieldsAndButtonLabel()},true)}else{l.btn.obj.style.visibility="hidden"}}this.createLineFeed();l.contentIdx=i;return l};f.share.EmailDialog.prototype.updateEmailInputFieldsAndButtonLabel=function(){var g=this.contentSpan.querySelectorAll(".s7dialogline .s7dialoginputcontainer .s7dialoginputshort");for(var j=1;j<g.length;j++){g[j].ariaLabel=this.getLocalizedText("ADDITIONAL_EMAIL_ADDRESS")+j;g[j].parentElement.parentElement.querySelector(".s7button.s7dialogremoveemailbutton").ariaLabel=this.getLocalizedText("TOOLTIP_REMOVE")+" "+this.getLocalizedText("ADDITIONAL_EMAIL_ADDRESS")+" "+j}var h=this.contentSpan.querySelector(".s7dialoglinefeed + .s7dialoglinefeed");if(h){h.remove()}};f.share.EmailDialog.prototype.setDialogData=function(j){var k=this.contentSpan.childNodes;for(var h=0;h<k.length;h++){var g=null;if(k[h].contentIdx){switch(k[h].contentIdx){case"$TOEMAIL$":k[h].inp.value=j.toEmail[0];break;case"$FROMEMAIL$":k[h].inp.value=j.fromEmail;break;case"$MESSAGEEMAIL$":k[h].inp.value=j.comments;break;default:break}}}this.descr.titlestr.innerHTML=j.titleStr;this.descr.imgsp.style.backgroundImage="url('"+j.thumbbnailUrl+"')";this.descr.descrtext.innerHTML=j.descrStr;this.container=null;this.attachDialog()};f.share.EmailDialog.prototype.getDialogData=function(){var k=this.contentSpan.childNodes;var j={"toEmail":[""],"fromEmail":"","comments":""};for(var h=0;h<k.length;h++){var g=null;if(k[h].contentIdx){g=k[h].inp.value;switch(k[h].contentIdx){case"$TOEMAIL$":j.toEmail[0]=g;break;case"$FROMEMAIL$":j.fromEmail=g;break;case"$MESSAGEEMAIL$":j.comments=g;break;default:if(k[h].contentIdx.indexOf("$ADDEMAIL")!=-1){j.toEmail.push(g)}break}}}return j};f.share.EmailDialog.prototype.verifyEmailAddress=function(i){var g=i.inp.value;var h=this.validateEmailStr(g);if(!h){i.inp.setAttribute("aria-invalid",true);i.inp.setAttribute("aria-describedby",this.errLine.id)}else{i.inp.setAttribute("aria-invalid",false);i.inp.removeAttribute("aria-describedby",this.errLine.id)}this.setupErrorMsg(i,!h);return h};f.share.EmailDialog.prototype.setupScroll=function(i){var j=this.contentSpan.offsetHeight-this.contentInt.clientHeight;if(j>0){if(!this.isTouch){var h=this.scrollbarInst.curPos_;this.scrollbarInst.setMaxScroll(j);var g=i?this.contentInt.offsetHeight-(f.Util.getObjPos(this.addBtnCtnr).y-f.Util.getObjPos(this.contentInt).y)-this.addBtnCtnr.offsetHeight:-h;if(g<0){this.scrollbarInst.curPos_=-g;this.scrollbarInst.setThumbPosition(false)}}this.contentSb.style.display="inline-block"}else{this.contentSb.style.display="none"}if(this.scrollbarInst){this.scrollbarInst.setScrollStep(Math.round(this.contentInt.clientHeight*0.1))}};f.share.EmailDialog.prototype.onRemove=function(g){this.setupErrorMsg(g,false);if(g.btn&&g.btn.toolTip_){g.btn.toolTip_.removeToolTip()}this.contentSpan.removeChild(g);if(this.contentSpan.querySelectorAll(".s7dialogremoveemailbutton").length==0){this.contentSpan.removeChild(this.contentSpan.querySelector(".s7dialogadditionalemaillabel"))}this.wid_=0};f.share.EmailDialog.prototype.validateEmailStr=function(i){var h=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/igm;var g=h.test(i);return g};f.share.EmailDialog.prototype.setupErrorMsg=function(m,n){f.Util.css.setCSSAttributeSelector(m.spinp,"state",n?"verifyerror":"");var k=false;var l;if(m.classList.contains("s7dialoglineto")){this.errLine=this.toEmailError}else{this.errLine=this.fromEmailError}for(l=0;l<this.errLine.errList.length;l++){if(this.errLine.errList[l]==m){k=true;break}}if(n){if(!k){this.errLine.errList.push(m)}}else{if(k){this.errLine.errList.splice(l,1)}}if(this.errLine.errList.length!=0){this.actionbutton.deactivate();this.errLine.setAttribute("aria-hidden",false);var g=false;var h=false;var j=document.getElementsByClassName("s7dialoginputshort");var o=document.getElementsByClassName("s7dialoginputwide");for(var l=0;l<j.length;l++){if(j[l].getAttribute("aria-invalid")=="true"){g=true}}for(var l=0;l<o.length;l++){if(o[l].getAttribute("aria-invalid")=="true"){h=true}}if(g){this.setErrorMsg("TO_EMAIL_ERROR","verifyerror",this.toEmailError)}if(h){this.setErrorMsg("FROM_EMAIL_ERROR","verifyerror",this.fromEmailError)}}else{this.actionbutton.activate();this.errLine.setAttribute("aria-hidden",true)}f.Util.css.setCSSAttributeSelector(this.errLine,"error",this.errLine.errList.length!=0)};f.share.EmailDialog.prototype.onClose=function(g){this.onCancel(g)};f.share.EmailDialog.prototype.onCancel=function(g){if(this.contentInt.getAttribute("state")!=""){f.Util.css.setCSSAttributeSelector(this.errLine,"error","false");this.setErrorMsg("INVALID_ADDRESSS","verifyerror",this.toEmailError);this.cancelbutton.setText(this.getLocalizedText("CANCEL"));this.cancelbutton.toolTip_.setContent(this.getLocalizedText("TOOLTIP_CANCEL"));f.Util.css.setCSSAttributeSelector(this.contentInt,"state","");this.disableInputs(false);this.showContent(true);this.actionbutton.obj.style.display="";this.actionbutton.activate();this.wid_=this.hei_=0;this.onCheckResize()}this.hide()};f.share.EmailDialog.prototype.disableInputs=function(g){var j=this.contentSpan.childNodes;for(var h=0;h<j.length;h++){if(j[h].contentIdx){j[h].inp.disabled=g}}};f.share.EmailDialog.prototype.showContent=function(j){var h=this.contentSpan.childNodes;for(var g=0;g<h.length;g++){if(h[g]!=this.errLine){h[g].style.display=j?"":"none"}}};f.share.EmailDialog.prototype.onAction=function(){var n=this.contentSpan.childNodes;var l={"toEmail":[""],"fromEmail":"","comments":""};var k=true;for(var h=0;h<n.length;h++){var g=null;if(n[h].contentIdx){g=n[h].inp.value;switch(n[h].contentIdx){case"$TOEMAIL$":l.toEmail[0]=g;break;case"$FROMEMAIL$":l.fromEmail=g;break;case"$MESSAGEEMAIL$":l.comments=g;g=null;break;default:if(n[h].contentIdx.indexOf("$ADDEMAIL")!=-1){l.toEmail.push(g)}else{g=null}break}}if(g!=null){if(!this.validateEmailStr(g)){if(this.verifyEmailAddress(n[h])===false){k=false}this.focusableElements=this.getFocusableElements();this.firstFocusableElement=this.focusableElements[0];this.lastFocusableElement=this.focusableElements[this.focusableElements.length-1];this.firstFocusableElement.focus()}}}if(k===false){return}var m="?";m+="toEmail="+l.toEmail.join(",");m+="&fromEmail="+l.fromEmail;m+="&desc="+this.titleStr;m+="&comments="+encodeURIComponent(l.comments);m+="&url="+encodeURIComponent(this.contentUrl);if(this.thumbbnailUrl){m+="&thumb="+encodeURIComponent(this.thumbbnailUrl)}if(this.descrStr){m+="&desc="+this.descrStr}m+="&language="+this.settings.locale;var j=this.emailurl+m;this.isReq_=new f.IS();this.isReq_.getHttpReq(j,this.requestComplete,this.requestError,this);this.disableInputs(true);this.cancelbutton.deactivate();this.actionbutton.deactivate()};f.share.EmailDialog.prototype.requestComplete=function(g,h){h.successSend(g.message)};f.share.EmailDialog.prototype.requestError=function(g,h){h.successSend(g.message)};f.share.EmailDialog.prototype.successSend=function(g){this.showContent(false);this.cancelbutton.setText(this.getLocalizedText("CLOSE"));this.cancelbutton.toolTip_.setContent(this.getLocalizedText("TOOLTIP_CLOSE"));this.cancelbutton.activate();this.actionbutton.obj.style.display="none";f.Util.css.setCSSAttributeSelector(this.contentInt,"state","sendsuccess");if(g==f.IS.STATUS_SUCCESS){this.setErrorMsg("SEND_SUCCESS","sendsuccess",this.toEmailError)}else{this.setErrorMsg("SEND_FAILURE","senderror",this.toEmailError)}this.errLine.setAttribute("aria-hidden",false);f.Util.css.setCSSAttributeSelector(this.errLine,"error","true");this.wid_=this.hei_=0;this.onCheckResize();this.focusableElements=this.getFocusableElements();this.firstFocusableElement=this.focusableElements[0];this.lastFocusableElement=this.focusableElements[this.focusableElements.length-1];this.firstFocusableElement.focus()};f.share.EmailDialog.prototype.setContentUrl=function(g){this.contentUrl=g};f.share.EmailDialog.prototype.setContentTitle=function(g){this.descr.titlestr.innerHTML=g;this.titleStr=g};f.share.EmailDialog.prototype.setOriginUrl=function(g){this.descr.site.innerHTML=g};f.share.EmailDialog.prototype.setThumbnail=function(i){var h=this.descr.imgsp;if(!i){return}var g=f.Util.resolveURL(this.serverUrl,i);g+=(g.indexOf("?")==-1?"?":"&")+"wid="+h.w;g+="&hei="+h.h;h.style.backgroundImage="url('"+g+"')";this.thumbbnailUrl=g};f.share.EmailDialog.prototype.setDescription=function(g){this.descr.descrtext.innerHTML=g;this.descrStr=g};f.share.EmailDialog.prototype.setEmailService=function(g){this.emailurl=g};f.share.EmailDialog.prototype.setServerUrl=function(g){this.serverUrl=f.Util.normalizeUrl(g)};(function a(){var k=f.Util.css.createCssRuleText;var i=f.Util.css.createCssImgUrlText;var g=k(".s7emaildialog .s7dialogheadericon",{"background-image":i("dlgemail_cap.png"),"width":"24px","height":"17px"})+k(".s7emaildialog .s7dialoginputlabel",{"margin-right":"10px","padding":"10px","position":"relative","display":"block","text-align":"left"})+k(".s7emaildialog .s7dialogerrormessage",{"position":"relative","display":"inline-block","background-position":"left center","background-repeat":"no-repeat","font-size":"10pt","font-weight":"bold","vertical-align":"middle","text-align":"center","padding-left":"20px","line-height":"25px"})+k(".s7emaildialog .s7dialogerrormessage[state='verifyerror']",{"background-image":i("dlgerrimg.png"),"color":"#ff0000"})+k(".s7emaildialog .s7dialogerrormessage[state='senderror']",{"background-image":i("dlgerrimg.png"),"color":"#ff0000"})+k(".s7emaildialog .s7dialogerrormessage[state='sendsuccess']",{"background-image":"none","color":"#00b200"})+k(".s7emaildialog .s7dialogbody .s7dialogline ",{"padding":"10px"})+k(".s7emaildialog .s7dialogviewarea",{"height":"300px","overflow":"auto"})+k(".s7emaildialog .s7dialogviewarea.s7dialogviewareashort",{"width":"315px"})+k(".s7emaildialog .s7dialogbody .s7dialoginputshortreduced",{"width":"175px"})+k(".s7emaildialog .s7dialogbody .s7dialoginputwidereduced",{"width":"200px"})+k(".s7emaildialog .s7dialogviewarea[state='sendsuccess']",{"height":"100px"})+k(".s7emaildialog .s7dialoginputcontainer",{"display":"inline-block","position":"relative","border":"1px solid #cccccc","padding":"9px"})+k(".s7emaildialog .s7dialogerror[error='false']",{"display":"none"})+k(".s7emaildialog .s7dialogerror[error='true']",{"display":"inline-block","width":"100%"})+k(".s7emaildialog .s7dialoginputcontainer[state='verifyerror']",{"border":"1px solid #ff0000"})+k(".s7emaildialog .s7dialoginputshort",{"border":"none","width":"250px"})+k(".s7emaildialog .s7dialoginputwide",{"border":"none","width":"300px"})+k(".s7emaildialog .s7dialogmessage",{"white-space":"pre-wrap","white-space":"-moz-pre-wrap","white-space":"-pre-wrap","white-space":"-o-pre-wrap","word-wrap":"break-word","resize":"none","height":"50px"})+k(".s7emaildialog .s7dialogbody .s7dialogcontent",{"padding":"0","border":"1px dotted #a0a0a0"})+k(".s7emaildialog .s7dialogthumbnail",{"position":"relative","display":"inline-block","background-position":"center center","background-repeat":"no-repeat","width":"90px","height":"60px","padding":"10px","vertical-align":"top"})+k(".s7emaildialog .s7dialoginfopanel",{"position":"relative","width":"300px","display":"inline-block"})+k(".s7emaildialog .s7dialogtitle",{"position":"relative","display":"block","font-weight":"bold","margin":"10px"})+k(".s7emaildialog .s7dialogorigin",{"position":"relative","margin":"10px","display":"block"})+k(".s7emaildialog .s7dialogdescription",{"font-size":"9pt","position":"relative","margin":"10px","display":"block"})+k(".s7emaildialog .s7dialogactionbutton",{"width":"82px","height":"34px"})+k(".s7emaildialog .s7dialogactionbutton[state='up']",{"background-color":"#333333","color":"#dddddd"})+k(".s7emaildialog .s7dialogactionbutton[state='down']",{"background-color":"#222222","color":"#cccccc"})+k(".s7emaildialog .s7dialogactionbutton[state='over']",{"background-color":"#222222","color":"#cccccc"})+k(".s7emaildialog .s7dialogactionbutton[state='disabled']",{"background-color":"#b2b2b2","color":"#dddddd"})+k(".s7emaildialog .s7dialogremoveemailbutton",{"position":"relative","display":"inline-block","width":"25px","height":"25px"})+k(".s7emaildialog .s7dialogaddemailbutton",{"background-repeat":"no-repeat","position":"relative","display":"inline-block","text-align":"right","font-size":"12pt","font-weight":"bold","background-position":"left center","line-height":"25px","padding-left":"30px","height":"25px"})+k(".s7emaildialog .s7dialogaddemailbutton[state='up']",{"color":"#666666"})+k(".s7emaildialog .s7dialogaddemailbutton[state='down']",{"color":"#000000"})+k(".s7emaildialog .s7dialogaddemailbutton[state='over']",{"color":"#000000","text-decoration":"underline"})+k(".s7emaildialog .s7dialogaddemailbutton[state='disabled']",{"color":"#666666"})+k(".s7emaildialog .s7dialogcancelbutton",{"width":"64px","height":"34px"})+k(".s7emaildialog .s7dialogcancelbutton[state='up']",{"background-color":"#666666","color":"#e4e4e4"})+k(".s7emaildialog .s7dialogcancelbutton[state='down']",{"background-color":"#555555","color":"#ffffff"})+k(".s7emaildialog .s7dialogcancelbutton[state='over']",{"background-color":"#555555","color":"#ffffff"})+k(".s7emaildialog .s7dialogcancelbutton[state='disabled']",{"background-color":"#b2b2b2","color":"#e4e4e4"});var h=k(".s7emaildialog .s7scrollbar",{"background-color":"transparent","position":"absolute","top":"8px","bottom":"8px","right":"8px","width":"28px"})+k(".s7emaildialog .s7scrollbar .s7scrolltrack",{"background-color":"rgb(178, 178, 178)"});g=h+g;var j=[];j.push({cssNm:"s7dialogaddemailbutton",skins:["dlgaddplus_up.png","dlgaddplus_over.png","dlgaddplus_over.png","dlgaddplus_up.png"]});j.push({cssNm:"s7dialogremoveemailbutton",skins:["dlgremove_up.png","dlgremove_over.png","dlgremove_over.png","dlgremove_up.png"]});j.push({cssNm:"s7dialogactionbutton",skins:[]});f.share.dialogsDefaultCSS("EmailDialog",".s7emaildialog",j,g)})()}if(!f.share.EmbedDialogControl){f.share.EmbedDialogControl=function(g){arguments.callee.superclass.apply(this,[g,f.share.EmbedDialogControl.NS,g.constructor,f.share.EmbedDialog.RESTRICTED_STYLES])};f.share.EmbedDialogControl.prototype.setCSS=function(k,j,i){if(this.component){function h(l){return l.replace(/\./g,"").split(" ")}var g=h(k);if(g[0]==this.component.cl){this.superclass.prototype.setCSS.apply(this,[k,j,i])}}};f.share.EmbedDialogControl.NS="s7sdk.share.EmbedDialogControl"}f.Class.inherits(f.share.EmbedDialogControl.NS,"s7sdk.ControlComponent");if(!f.share.EmbedDialog){f.share.EmbedDialog=function EmbedDialog(g,k,i,m,h,j){f.Logger.log(f.Logger.CONFIG,"s7sdk.share.EmbedDialog constructor - containerId: %0, settings: %1 , compId: %2",g,k,i);this.embedsizes=this.validateEmbedSizes(m);var l=!!arguments[6];arguments.callee.superclass.apply(this,[g,k,i,"s7embeddialog",h,j,!l]);this.createDialog(f.browser.device.name!="desktop");if(!l){return new f.share.EmbedDialogControl(this)}else{return this}};f.Class.inherits("s7sdk.share.EmbedDialog","s7sdk.share.SocialDialog");f.share.EmbedDialog.prototype.symbols={HEADER:"Embed Link",DESCRIPTION:"To share this content with others, copy and past this code:",EMBED_SIZE:"Embed Size",TOOLTIP_SCROLL_UP:"Scroll up",TOOLTIP_SCROLL_DOWN:"Scroll down",CUSTOM_SIZE:"Custom Size",ACTION:"Select All",TOOLTIP_ACTION:"Select All",CANCEL:"Cancel",TOOLTIP_CANCEL:"Cancel"};f.share.EmbedDialog.prototype.createContent=function(){this.createLinkLable(this.getLocalizedText("DESCRIPTION"));this.createLinkLine();this.createSelectLine();this.createLineFeed();this.addBtnCtnr=this.cBox.obj;var i=this;var h=window.matchMedia("(max-width: 700px)");function g(k){var j=document.querySelector(".s7embeddialog .s7dialogline.s7dialoginputcontainer");var l=document.querySelector(".s7embeddialog .s7combobox");if(k.matches){j.classList.add("s7dialoginputwidereduced");l.classList.add("s7dialoginputwidereduced")}else{j.classList.remove("s7dialoginputwidereduced");l.classList.remove("s7dialoginputwidereduced")}}g(h);h.addListener(g);f.Event.addDOMListener(this.contentInt,"scroll",function(j){i.onNativeScroll()},true)};f.share.EmbedDialog.prototype.onNativeScroll=function(){if(!this.cBox.blockScroll){this.cBox.hideDropDn()}};var e="embeddialoguelabel_"+Math.floor(Math.random()*1000)+1;f.share.EmbedDialog.prototype.createLinkLable=function(g){var h=document.createElement("span");h.className="s7dialogline s7dialoglabel s7dialoginputwide";h.setAttribute("id",e);this.contentSpan.appendChild(h);h.innerText=g;this.createLineFeed()};f.share.EmbedDialog.prototype.createLinkLine=function(){var h=document.createElement("span");h.className="s7dialogline s7dialoginputcontainer";this.contentSpan.appendChild(h);var g=document.createElement("span");g.className="s7dialogmessage";g.setAttribute("role","textbox");g.setAttribute("contenteditable","false");g.setAttribute("aria-readonly","true");g.setAttribute("tabindex",0);g.setAttribute("aria-labelledby",e);h.appendChild(g);this.inplnk=g;this.createLineFeed()};f.share.EmbedDialog.prototype.updetCboxItems=function(j){if(j){var g=j.split(";");this.cbxSizes=[];var k=0;for(var h=0;h<g.length;h++){var l=g[h].split(",");if(l.length==3){k=h}this.cbxSizes.push(l[0]+"x"+l[1])}this.cbxSizes.push(this.customSizeStr);this.cBox.update(this.cbxSizes,k)}else{this.cBox.update(["320x240","640x480","1280x960",this.customSizeStr],1)}this.embedsizes=j};f.share.EmbedDialog.prototype.createSelectLine=function(){var g=document.createElement("span");g.className="s7dialogline s7dialogembedsizepanel";this.contentSpan.appendChild(g);var j=document.createElement("span");j.className="s7dialoglabel s7dialogembedsizelabel";j.id=this.id+"_lbl_"+f.Util.createUniqueId();j.innerText=this.getLocalizedText("EMBED_SIZE");g.appendChild(j);g.id=this.id+"_selectorContainer";this.cBox=new f.share.CustomComboBox(g.id,this.settings,g.id+"_combobox","span",this,this.cntSpAbsolute,j.id);this.cBox.obj.style.display="inline-block";this.customSizeStr=this.getLocalizedText("CUSTOM_SIZE");if(this.embedsizes){this.updetCboxItems(this.embedsizes)}var i=document.createElement("span");i.className="s7dialogcustomsizepanel";g.appendChild(i);this.widinpsp=this.createSizeInp(i,"s7dialogcustomsize");this.widinpsp.szinp.setAttribute("aria-label",this.getLocalizedText("CUSTOM_SIZE_WIDTH"));var h=this;f.Event.addDOMListener(this.widinpsp.szinp,"change",function(k){h.onInpChanged(h.widinpsp.szinp)},true);g.onExpand=function(){h.onExpand()};this.heiinpsp=this.createSizeInp(i,"s7dialogcustomsize");this.heiinpsp.szinp.setAttribute("aria-label",this.getLocalizedText("CUSTOM_SIZE_HEIGHT"));f.Event.addDOMListener(this.heiinpsp.szinp,"change",function(k){h.onInpChanged(h.heiinpsp.szinp)},true);this.createLineFeed()};f.share.EmbedDialog.prototype.onInpChanged=function(g){var h=this.widinpsp.szinp.value+"x"+this.heiinpsp.szinp.value;this.updateTemplateText(h)};f.share.EmbedDialog.prototype.createSizeInp=function(k,i){var l=document.createElement("span");l.className=i;k.appendChild(l);var j=document.createElement("span");j.className="s7comboboxtext";j.style.width="0px";j.style.verticalAlign="middle";l.appendChild(j);var h=document.createElement("span");h.className="s7dialogcustomsizeinput";l.appendChild(h);var g=document.createElement("input");g.className="s7dialogcustomsizeinput";l.appendChild(h);h.appendChild(g);l.style.display="none";l.szinp=g;return l};f.share.EmbedDialog.prototype.updateForShow=function(g){var j=this.cbxSizes.length-1;for(var h=0;h<this.cbxSizes.length;h++){if(g==this.cbxSizes[h]){j=h;break}}this.cBox.selectByIdx(j)};f.share.EmbedDialog.prototype.updateTemplate=function(h){this.newSize=h;if(h==this.customSizeStr){this.cBox.changeState(f.share.CustomComboBox.ShRINKED);if(this.widinpsp&&this.widinpsp.szinp){this.widinpsp.style.display="inline-block";this.heiinpsp.style.display="inline-block";var g=this.curSize.toLowerCase().split("x");this.widinpsp.szinp.value=g[0];this.heiinpsp.szinp.value=g[1];this.widinpsp.szinp.setAttribute("aria-label",this.getLocalizedText("CUSTOM_SIZE_WIDTH"));this.heiinpsp.szinp.setAttribute("aria-label",this.getLocalizedText("CUSTOM_SIZE_HEIGHT"))}}else{if(this.widinpsp&&this.widinpsp.szinp){this.widinpsp.style.display="none";this.heiinpsp.style.display="none"}this.cBox.changeState(f.share.CustomComboBox.EXPANDED);this.updateTemplateText(h)}};f.share.EmbedDialog.prototype.onPositionChanged=function(){if(!this.cBox.blockScroll){this.cBox.hideDropDn()}};f.share.EmbedDialog.prototype.updateTemplateText=function(h){this.curSize=h;var g=h.toLowerCase().split("x");if(this.template){var i=this.template.replace("$EMBED_WIDTH$",g[0]).replace("$EMBED_HEIGHT$",g[1]);this.inplnk.innerHTML=i;this.setupSz()}};f.share.EmbedDialog.prototype.onExpand=function(){};f.share.EmbedDialog.prototype.setupScroll=function(i){var j=this.contentSpan.offsetHeight-this.contentInt.clientHeight;if(j>0){if(!this.isTouch){var h=this.scrollbarInst.curPos_;this.contentSb.style.display="inline-block";this.scrollbarInst.setMaxScroll(j);var g=i?this.contentInt.offsetHeight-(f.Util.getObjPos(this.addBtnCtnr).y-f.Util.getObjPos(this.contentInt).y)-this.addBtnCtnr.offsetHeight:-h;if(g<0){this.scrollbarInst.curPos_=-g;this.scrollbarInst.setThumbPosition(false)}}}else{this.contentSb.style.display="none"}if(this.scrollbarInst){this.scrollbarInst.setScrollStep(Math.round(this.contentInt.clientHeight*0.1))}};f.share.EmbedDialog.prototype.show=function(){f.share.SocialDialog.prototype.show.apply(this,[])};f.share.EmbedDialog.prototype.hide=function(){this.cBox.hideDropDn();f.share.SocialDialog.prototype.hide.apply(this,[])};f.share.EmbedDialog.prototype.onCancel=function(){try{window.getSelection().removeAllRanges()}catch(g){document.selection.empty()}this.hide()};f.share.EmbedDialog.prototype.onAction=function(){this.firstFocusableElement=this.inplnk;this.inplnk.focus();var g,h;if(window.getSelection&&document.createRange){h=window.getSelection();g=document.createRange();g.selectNodeContents(this.inplnk);h.removeAllRanges();h.addRange(g)}else{if(document.selection&&document.body.createTextRange){g=document.body.createTextRange();g.moveToElementText(this.inplnk);g.select()}else{}}};f.share.EmbedDialog.prototype.onClose=function(){f.share.SocialDialog.prototype.onClose.apply(this,[])};f.share.EmbedDialog.prototype.setEmbedCode=function(h){if(!h){return}var g=h;g=g.replace(/&/g,"&amp;");g=g.replace(/</g,"&lt;");g=g.replace(/>/g,"&gt;");g=g.replace(/\n/g,"<br>");this.template=g;if(this.curSize){this.updateForShow(this.curSize)}};f.share.EmbedDialog.prototype.getDialogData=function(g){var g={};g.newSize=this.newSize;g.curSize=this.curSize;return g};f.share.EmbedDialog.prototype.setDialogData=function(g){this.embedsizes=this.validateEmbedSizes(g.embedsizes);this.template=g.template;this.updetCboxItems(this.embedsizes);this.curSize=g.curSize;this.setEmbedCode(this.template);this.updateTemplate(g.newSize);this.updateTemplateText(this.curSize);this.container=null;this.attachDialog()};f.share.EmbedDialog.prototype.validateEmbedSizes=function(g){return/^(true|false|[0-9,;])*$/gi.test(g)?g:f.share.EmbedShare.DEFAULT_EMBED_SIZES};(function a(){var m=f.Util.css.createCssRuleText;var i=f.Util.css.createCssImgUrlText;var g=m(".s7embeddialog .s7dialogheadericon",{"background-image":i("dlgembed_cap.png"),"width":"24px","height":"14px"})+m(".s7embeddialog .s7dialogviewarea",{"height":"300px","overflow":"auto"})+m(".s7embeddialog .s7dialogviewarea.s7dialogviewareashort",{"width":"315px"})+m(".s7embeddialog .s7dialogbody .s7dialoginputwidereduced",{"width":"200px"})+m(".s7embeddialog .s7dialogbody .s7dialogembedsizepanel .s7dialoginputwidereduced",{"width":"200px"})+m(".s7embeddialog .s7dialoginputwide",{"border":"none","padding-bottom":"10px","width":"430px"})+m(".s7embeddialog .s7dialoginputcontainer",{"padding":"10px","width":"430px","font-size":"10pt","word-wrap":"break-word","border":"1px solid #cccccc"})+m(".s7embeddialog .s7dialogmessage",{"-moz-user-select":"text","-khtml-user-select":"text","-webkit-user-select":"text","-o-user-select":"text","white-space":"pre-wrap","white-space":"-moz-pre-wrap","white-space":"-pre-wrap","white-space":"-o-pre-wrap","word-wrap":"break-word","user-select":"text","border":"none","resize":"none","height":"50px"})+m(".s7embeddialog .s7dialogembedsizepanel",{"font-size":"10pt","padding":"10px","border":"none"})+m(".s7embeddialog .s7dialogembedsizelabel",{"vertical-align":"top","display":"inline-block","width":"80px"})+m(".s7embeddialog .s7dialogcustomsizepanel",{"position":"relative","display":"inline-block","left":"20px","vertical-align":"top"})+m(".s7embeddialog .s7comboboxtext",{"position":"relative","display":"inline-block","height":"40px"})+m(".s7embeddialog .s7comboboxdropdown",{"font-size":"10pt","border":"1px solid #cccccc"})+m(".s7embeddialog .s7dialogcustomsize",{"position":"relative","display":"inline-block","border":"1px solid #cccccc","padding-left":"2px","padding-right":"2px","margin-right":"20px","width":"70px"})+m(".s7embeddialog .s7dialogcustomsizeinput",{"border":"none","display":"inline-block","vertical-align":"middle","width":"100%"})+m(".s7embeddialog .s7dialogcancelbutton",{"width":"64px","height":"34px"})+m(".s7embeddialog .s7dialogcancelbutton[state='up']",{"background-color":"#666666","color":"#e4e4e4"})+m(".s7embeddialog .s7dialogcancelbutton[state='down']",{"background-color":"#555555","color":"#ffffff"})+m(".s7embeddialog .s7dialogcancelbutton[state='over']",{"background-color":"#555555","color":"#ffffff"})+m(".s7embeddialog .s7dialogcancelbutton[state='disabled']",{"background-color":"#b2b2b2","color":"#e4e4e4"})+m(".s7embeddialog .s7dialogactionbutton",{"width":"82px","height":"34px"})+m(".s7embeddialog .s7dialogactionbutton[state='up']",{"background-color":"#333333","color":"#dddddd"})+m(".s7embeddialog .s7dialogactionbutton[state='down']",{"background-color":"#222222","color":"#cccccc"})+m(".s7embeddialog .s7dialogactionbutton[state='over']",{"background-color":"#222222","color":"#cccccc"})+m(".s7embeddialog .s7dialogactionbutton[state='disabled']",{"background-color":"#b2b2b2","color":"#dddddd"});var h=m(".s7embeddialog .s7scrollbar",{"background-color":"transparent","position":"absolute","top":"8px","bottom":"8px","right":"8px","width":"28px"})+m(".s7embeddialog .s7scrollbar .s7scrolltrack",{"background-color":"rgb(178, 178, 178)"});g=h+g;var l=f.share.comboBoxDDDefaultCSS(".s7embeddialog");var k=f.share.comboBoxDefaultCSS(".s7embeddialog");g=l+g+k;var j=[];j.push({cssNm:"s7dialogactionbutton",skins:[]});f.share.dialogsDefaultCSS("EmbedDialog",".s7embeddialog",j,g)})()}if(!f.share.PrintControl){f.share.PrintControl=function(g){arguments.callee.superclass.apply(this,[g,f.share.PrintControl.NS,g.constructor,f.share.Print.RESTRICTED_STYLES])};f.share.PrintControl.NS="s7sdk.share.PrintControl";f.Class.inherits(f.share.PrintControl.NS,"s7sdk.ControlComponent")}if(!f.share.Print){f.share.Print=function Print(g,i,h){f.Logger.log(f.Logger.CONFIG,"s7sdk.share.Print constructor - container: %0, settings: %1 , compId: %2",g,i,h);arguments.callee.superclass.apply(this,[h,g,null,0,0,"s7print",i]);var k=!!arguments[3];this.serverUrl=f.Util.normalizeUrl(this.serverUrl);var j=this;this.onclickHandler=function(){j.btnClick()};f.Event.addDOMListener(this,"click",this.onclickHandler,false);if(!k){this.printdialog=new f.share.PrintDialog(this.id,this.settings,this.id+"_dialog",f.share.getDialogSymbols(this),this);this.printdialog.setServerUrl(this.serverUrl);this.printdialog.setPrintquality(this.printquality);return new f.share.PrintControl(this)}else{return this}};f.Class.inherits("s7sdk.share.Print","s7sdk.common.Button");f.share.Print.prototype.symbols={TOOLTIP:"Prepare to print",HEADER:"Prepare to print",TOOLTIP_HEADER_CLOSE:"Close",PRINT_RANGE:"Select Print Pages",PRINT_RANGE_CURRENT:"Current pages",PRINT_RANGE_FROM:"Spread range from:",PRINT_RANGE_TO:"to:",PRINT_RANGE_ALL:"All pages",PAGE_HANDLING:"Page Handling",PAGE_HANDLING_ONE:"1 page per sheet",PAGE_HANDLING_TWO:"2 pages per sheet",ACTION:"Send to Print",TOOLTIP_ACTION:"Send to Print",CANCEL:"Cancel",TOOLTIP_CANCEL:"Cancel"};f.share.Print.prototype.modifiers={printquality:{params:["wid"],defaults:[1000],ranges:["1:"]},serverUrl:{params:["isRootPath"],defaults:["/is/image/"]}};f.share.Print.RESTRICTED_STYLES={"s7print":["width","height"]};f.share.Print.prototype.setCSS=function(i,h,g){if(this.isRestrictedCSSProperty(f.share.Print.RESTRICTED_STYLES,h)){throw new Error("You cannot set "+i+" : "+h+" CSS property for this component ")}else{this.superclass.superclass.superclass.prototype.setCSS.apply(this,[i,h,g])}};f.share.Print.prototype.btnClick=function(){this.printdialog.show()};f.share.Print.prototype.addEventListener=function(i,h,g){f.Logger.log(f.Logger.FINE,"s7sdk.share.Print.addEventListener - type: %0, handler: %1, useCapture: %2",i,h.toString().substring(0,h.toString().indexOf("(")),g);this.superproto.addEventListener.apply(this,[i,h,g])};f.share.Print.prototype.setCurrentFrameIndex=function(g){this.currentFrameIndex=g;this.printdialog.setCurrentFrameIndex(g)};f.share.Print.prototype.setMediaSet=function(h){var g=h;if(!(h instanceof f.OrientationSetDesc)){g=new f.OrientationSetDesc(g,null)}if(g.landscape==null||typeof(g.landscape.items[0])=="undefined"){return}this.printdialog.setMediaSet(g.landscape)};f.share.Print.prototype.cleanUp=function(){f.Event.removeDOMListener(this,"touchstart",this.ontouchHandler,{passive:false});this.removeEventListener("click",this.onclickHandler,false);if(this.printdialog){this.printdialog.dispose()}this.superproto.cleanUp.apply(this)};f.share.Print.prototype.dispose=function(){this.cleanUp();if(this.obj){if(this.obj.parentElement){this.obj.parentElement.removeChild(this.obj)}}};(function a(){f.share.buttonsDefaultCSS("Print",".s7print",["print_up.png","print_over.png","print_down.png","print_disabled.png"])})()}if(!f.share.PrintDialogControl){f.share.PrintDialogControl=function(g){arguments.callee.superclass.apply(this,[g,f.share.PrintDialogControl.NS,g.constructor,f.share.PrintDialog.RESTRICTED_STYLES])};f.share.PrintDialogControl.prototype.setCSS=function(k,j,i){if(this.component){function h(l){return l.replace(/\./g,"").split(" ")}var g=h(k);if(g[0]==this.component.cl){this.superclass.prototype.setCSS.apply(this,[k,j,i])}}};f.share.PrintDialogControl.NS="s7sdk.share.PrintDialogControl";f.Class.inherits(f.share.PrintDialogControl.NS,"s7sdk.ControlComponent")}if(!f.share.PrintDialog){f.share.PrintDialog=function PrintDialog(g,k,i,h,j){f.Logger.log(f.Logger.CONFIG,"s7sdk.share.PrintDialog constructor - containerId: %0, settings: %1 , compId: %2",g,k,i);var l=!!arguments[5];arguments.callee.superclass.apply(this,[g,k,i,"s7printdialog",h,j,!l]);this.createDialog(f.browser.device.name!="desktop");if(!l){return new f.share.PrintDialogControl(this)}else{return this}};f.Class.inherits("s7sdk.share.PrintDialog","s7sdk.share.SocialDialog");f.share.PrintDialog.prototype.symbols={HEADER:"",PRINT_RANGE:"",PRINT_RANGE_CURRENT:"",PRINT_RANGE_FROM:"",PRINT_RANGE_TO:"",PRINT_RANGE_ALL:"",PAGE_HANDLING:"",PAGE_HANDLING_ONE:"",PAGE_HANDLING_TWO:"",ACTION:"",TOOLTIP_ACTION:"",CANCEL:"",TOOLTIP_CANCEL:""};f.share.PrintDialog.prototype.setupScroll=function(){this.isTouch=false};f.share.PrintDialog.prototype.createContent=function(){this.popupparams={};this.popupparams.inputs=[];var h=this.popupparams.inputs;var i=this;this.popupparams.validate=function(n){for(var m=0;m<h.length;m++){var l=h[m];var o=n.target.groupId?n.target:n.currentTarget;if(l.groupId==o.groupId){l.inp.checked=l==o;if(l.inp.checked){l.inp.setAttribute("tabindex","0");l.inp.setAttribute("aria-checked","true")}else{l.inp.setAttribute("tabindex","-1");l.inp.setAttribute("aria-checked","false")}}}i.focusableElements=i.getFocusableElements();i.firstFocusableElement=i.focusableElements[0];i.lastFocusableElement=i.focusableElements[i.focusableElements.length-1]};var g=this.createPrintLable(this.getLocalizedText("PRINT_RANGE"));this.radioGroup1=document.createElement("fieldset");this.radioGroup1.className="s7radiogroup";this.radioGroup1.setAttribute("tabindex","-1");this.radioGroup1.setAttribute("role","radiogroup");this.radioGroup1.setAttribute("aria-labelledby",g.id);var j=this.createOneLine(1,this.getLocalizedText("PRINT_RANGE_FROM"),"mode");this.createNumberCtrl(j,this.getLocalizedText("PRINT_RANGE_FROM"),this.getLocalizedText("PRINT_RANGE_TO"));this.radioGroup1.appendChild(this.createOneLine(0,this.getLocalizedText("PRINT_RANGE_CURRENT"),"mode"));this.radioGroup1.appendChild(j);this.radioGroup1.appendChild(this.createOneLine(2,this.getLocalizedText("PRINT_RANGE_ALL"),"mode"));this.contentSpan.appendChild(this.radioGroup1);this.setSelected("mode",0);var k=this.createPrintLable(this.getLocalizedText("PAGE_HANDLING"),true);this.radioGroup2=document.createElement("fieldset");this.radioGroup2.className="s7radiogroup";this.radioGroup2.setAttribute("tabindex","-1");this.radioGroup2.setAttribute("role","radiogroup");this.radioGroup2.setAttribute("aria-labelledby",k.id);this.radioGroup2.appendChild(this.createOneLine(0,this.getLocalizedText("PAGE_HANDLING_ONE"),"layout"));this.radioGroup2.appendChild(this.createOneLine(1,this.getLocalizedText("PAGE_HANDLING_TWO"),"layout"));this.contentSpan.appendChild(this.radioGroup2);this.setSelected("layout",1)};f.share.PrintDialog.prototype.setSelected=function(k,g){for(var j=0;j<this.popupparams.inputs.length;j++){var h=this.popupparams.inputs[j];if(h.groupId==k){h.inp.checked=h.inp.value==g;if(h.inp.checked){h.inp.setAttribute("tabindex","0");h.inp.setAttribute("aria-checked","true")}else{h.inp.setAttribute("tabindex","-1");h.inp.setAttribute("aria-checked","false")}}}this.focusableElements=this.getFocusableElements();this.firstFocusableElement=this.focusableElements[0];this.lastFocusableElement=this.focusableElements[this.focusableElements.length-1]};f.share.PrintDialog.prototype.getSelected=function(j){for(var h=0;h<this.popupparams.inputs.length;h++){var g=this.popupparams.inputs[h];if((g.groupId==j)&&g.inp.checked){return parseInt(g.inp.value)}}return 0};f.share.PrintDialog.prototype.createPrintLable=function(g,i){var h=document.createElement("span");h.id=f.Util.createUniqueId();h.className="s7dialogline s7dialoglabel"+(i?" s7horizontaldivider":" s7dialoginputwide");this.contentSpan.appendChild(h);h.innerText=g;this.createLineFeed();return h};f.share.PrintDialog.prototype.createNumberCtrl=function(l,j,g){var i=document.createElement("input");i.setAttribute("type","number");i.setAttribute("role","textbox");i.setAttribute("aria-multiline",false);i.setAttribute("aria-label",j);i.className="s7dialogrange";i.value=1;i.setAttribute("min",1);i.setAttribute("max",1);l.appendChild(i);this.popupparams.startPg=i;var k=document.createElement("span");k.innerText=g;l.appendChild(k);var h=document.createElement("input");h.setAttribute("type","number");h.setAttribute("role","textbox");h.setAttribute("aria-multiline",false);h.setAttribute("aria-label",g);h.className="s7dialogrange";h.value=1;h.setAttribute("min",1);h.setAttribute("max",1);l.appendChild(h);this.popupparams.endPg=h;this.popupparams.startPg.onchange=function(m){h.setAttribute("min",i.value)};this.popupparams.endPg.onchange=function(m){i.setAttribute("max",h.value)}};f.share.PrintDialog.prototype.createOneLine=function(h,g,k){var i=document.createElement("div");i.className="s7dialoginputcontainer";var m=document.createElement("div");m.groupId=k;m.className="s7dialogoption";var j=this.popupparams;m.onclick=function(o){j.validate(o)};var l=document.createElement("input");l.setAttribute("type","radio");l.setAttribute("role","radio");l.setAttribute("aria-label",g);l.setAttribute("tabindex","-1");l.value=h;l.name=k;m.inp=l;m.appendChild(l);var n=document.createElement("span");n.innerText=g;m.appendChild(n);this.popupparams.inputs.push(m);i.appendChild(m);this.contentSpan.appendChild(i);this.createLineFeed();return i};f.share.PrintDialog.prototype.setMediaSet=function(h){this.items=h.items;var g=h.name;var i=g.split("/");g=i.length==1?g:i[1];this.title=g;this.min=1;this.max=this.items.length;this.popupparams.startPg.setAttribute("min",this.min);this.popupparams.startPg.setAttribute("max",this.max);this.popupparams.startPg.value=this.min;this.popupparams.endPg.setAttribute("min",this.min);this.popupparams.endPg.setAttribute("max",this.max);this.popupparams.endPg.value=this.max};f.share.PrintDialog.prototype.setPrintquality=function(g){this.printquality=g};f.share.PrintDialog.prototype.setServerUrl=function(g){this.serverUrl=f.Util.normalizeUrl(g)};f.share.PrintDialog.prototype.setCurrentFrameIndex=function(g){this.currentFrameIndex=g};f.share.PrintDialog.prototype.onCancel=function(){this.hide()};f.share.PrintDialog.prototype.pageUrl=function(j,i){var g=f.Util.resolveURL(this.serverUrl,j.name);g+=(g.indexOf("?")>=0?"&":"?");var h=i?j.width/2:j.width;g+="wid="+(h<this.printquality?h:this.printquality+"&hei="+this.printquality+"&fit=fit,1");return g};f.share.PrintDialog.prototype.prepareOnePage=function(g,i){if(i.np){url=this.pageUrl(i,false)}else{var k=this.getSelected("layout");if(k==0){if(i instanceof f.ImageDesc){var j=i.name.split("?")[0].split("/")[0];var l=Math.round(i.width/2);url=f.Util.resolveURL(this.serverUrl,j)+"?src=is("+i.name+(i.name.indexOf("?")==-1?"?":"&")+"rgn=0,0,"+l+","+i.height+")";url+="wid="+(l<this.printquality?l:this.printquality+"&hei="+this.printquality+"&fit=fit,1");g.push(url);url=f.Util.resolveURL(this.serverUrl,j)+"?src=is("+i.name+(i.name.indexOf("?")==-1?"?":"&")+"rgn="+l+",0,"+l+","+i.height+")";url+="wid="+(l<this.printquality?l:this.printquality+"&hei="+this.printquality+"&fit=fit,1")}else{var h=i.images[0];url=this.pageUrl(h,true);g.push(url);h=i.images[1];url=this.pageUrl(h,true)}}else{url=this.pageUrl(i,false)}}g.push(url)};f.share.PrintDialog.prototype.onAction=function(){var h=[];var j=this.items;var n;var m;var l=this.getSelected("mode");switch(l){case 2:n=true;case 1:var o=n?0:parseInt(this.popupparams.startPg.value)-1;var g=n?j.length:parseInt(this.popupparams.endPg.value);for(var k=o;k<g;k++){var m=j[k];this.prepareOnePage(h,m)}break;default:m=j[this.currentFrameIndex];this.prepareOnePage(h,m);break}this.executePrint(h)};f.share.PrintDialog.prototype.executePrint=function(g){var j="<style type='text/css'>";j+="html,body{height:100%;margin:0;padding:0;}div{height:90%;}img{max-height: 100%;max-width: 100%;}";j+="</style>";var k="<html><head><title>"+this.title+"</title>"+j+"</head><body ></body></html>";var i=document.createElement("iframe");i.width="1";i.height="1";i.style.position="absolute";i.style.left="0px";i.style.top="0px";i.src="about:blank";var h=this;i.onload=function(){var p=i.contentWindow.document.createElement("script");p.type="text/javascript";var n="var imgs = [];  \n";n+="function checkReady(){ \n"+"for(var i=0;i<imgs.length;i++) {\n"+"if(!imgs[i].isready){ \n"+"return false;\n"+"}\n "+"} \n"+"return true; \n"+"};\n";n+="function Print(){ \n"+"var img;\n"+"var div;\n";for(var o=0;o<g.length;o++){n+='div = document.createElement("div");\n';if(o!=g.length-1){n+='div.style.pageBreakAfter="always";\n'}n+='img = document.createElement("img");\n';n+="div.appendChild(img);\n"+'img.id="s7im_'+o+'";\n '+'img.src="'+g[o]+'";\n '+"img.onload = function(e){\n "+"e.target.isready = true;"+"if(checkReady()) { \n"+"window.focus(); \n"+"window.print();\n"+"window.document.body.isTestPrinting = false; \n"+"} \n"+"};\n"+"imgs.push(img);"+"window.document.body.appendChild(div);\n"}n+="}";var m=i.contentWindow.document.createTextNode(n);p.appendChild(m);i.contentWindow.document.body.innerHTML=k;i.contentWindow.document.body.appendChild(p);i.contentWindow.document.body.isTestPrinting=true;function l(q){if(q.newIframe.contentWindow.document.body.isTestPrinting){setTimeout(function(){l(q)},200);return}q.newIframe.contentWindow.document.body.removeChild(q.script_tag);q.newIframe.parentElement.removeChild(q.newIframe);h.hide()}setTimeout(function(){i.contentWindow.Print();var q={};q.newIframe=i;q.script_tag=p;l(q)},200)};document.body.appendChild(i)};(function a(){var j=f.Util.css.createCssRuleText;var h=f.Util.css.createCssImgUrlText;var g=j(".s7printdialog .s7dialogheadericon",{"background-image":h("dlgprint_cap.png"),"width":"22px","height":"22px"})+j(".s7printdialog .s7dialogviewarea",{"height":"auto"})+j(".s7printdialog .s7radiogroup",{"border":"none"})+j(".s7printdialog .s7dialogoption input",{"margin-right":"10px"})+j(".s7printdialog .s7dialogoption",{"text-decoration":"none","position":"relative","display":"inline-block","color":"#000000","width":"150px"})+j(".s7printdialog .s7dialoginputwide",{"cursor":"default","border":"none","padding-bottom":"10px","width":"430px"})+j(".s7printdialog .s7horizontaldivider",{"cursor":"default","padding-bottom":"10px","width":"430px","margin-top":"10px","padding-top":"10px","border-top":"1px solid #aaaaaa"})+j(".s7printdialog .s7dialoginputcontainer",{"padding-left":"30px"})+j(".s7printdialog .s7dialogrange",{"display":"inline-block","width":"42px","margin-left":"10px","margin-right":"10px"})+j(".s7printdialog .s7dialogcancelbutton",{"width":"64px","height":"34px"})+j(".s7printdialog .s7dialogcancelbutton[state='up']",{"background-color":"#666666","color":"#e4e4e4"})+j(".s7printdialog .s7dialogcancelbutton[state='down']",{"background-color":"#555555","color":"#ffffff"})+j(".s7printdialog .s7dialogcancelbutton[state='over']",{"background-color":"#555555","color":"#ffffff"})+j(".s7printdialog .s7dialogcancelbutton[state='disabled']",{"background-color":"#b2b2b2","color":"#e4e4e4"})+j(".s7printdialog .s7dialogactionbutton",{"width":"96px","height":"34px"})+j(".s7printdialog .s7dialogactionbutton[state='up']",{"background-color":"#333333","color":"#dddddd"})+j(".s7printdialog .s7dialogactionbutton[state='down']",{"background-color":"#222222","color":"#cccccc"})+j(".s7printdialog .s7dialogactionbutton[state='over']",{"background-color":"#222222","color":"#cccccc"})+j(".s7printdialog .s7dialogactionbutton[state='disabled']",{"background-color":"#b2b2b2","color":"#dddddd"});var i=[];f.share.dialogsDefaultCSS("PrintDialog",".s7printdialog",i,g)})()}})(s7getCurrentNameSpace());